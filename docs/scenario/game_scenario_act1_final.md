# Игровой сценарий: "Последний Кузнец" - Акт I (Финальная техническая версия)
- **Версия:** 1.0
- **Автор:** Gemini
- **Дата:** 2025-08-07

---

## Содержание Акта I

*   [**Глава 1: У реки**](#глава-1-у-реки)
    *   [Сцена 1: Новый мир](#сцена-1-новый-мир)
    *   [Сцена 2: Первая ночь](#сцена-2-первая-ночь)
*   [**Глава 2: Дорога домой**](#глава-2-дорога-домой)
    *   [Сцена 1: Возвращение](#сцена-1-возвращение)
    *   [Сцена 2: Восстановление основ](#сцена-2-восстановление-основ)
*   [**Глава 3: Город выживших**](#глава-3-город-выживших)
    *   [Сцена 1: Прибытие в "Приют"](#сцена-1-прибытие-в-приют)
    *   [Сцена 2: Лицо из прошлого](#сцена-2-лицо-из-прошлого)
    *   [Сцена 3: Искра надежды](#сцена-3-искра-надежды)
*   [**Глава 4: Первые следы и первая искра**](#глава-4-первые-следы-и-первая-искра)
    *   [Сцена 1: Гиблые топи](#сцена-1-гиблые-топи)
    *   [Сцена 2: Битва за брата](#сцена-2-битва-за-брата)
    *   [Сцена 3: Таинственный лут](#сцена-3-таинственный-лут)
*   [**Глава 5: Рефлексия у наковальни**](#глава-5-рефлексия-у-наковальни)
    *   [Сцена 1: Возвращение домой](#сцена-1-возвращение-домой)

---

## Глава 1: У реки

### Сцена 1: Новый мир
- **Локация:** Берег реки, опушка леса (Z=0)
- **Тип сцены:** Геймплей / Обучение
- **Ключевая задача игрока:** Осмотреться и найти оружие.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnSceneStart`.
  - **Системные взаимодействия:**
    - `QuestSystem.StartQuest("act1_01_survivor", "Осмотритесь в поисках чего-нибудь полезного")`.
    - Рядом с игроком размещены интерактивные объекты: `item_sturdy_branch` и `item_thorny_bush`.
    - `OnInteract("item_sturdy_branch")`: `InventorySystem.AddItem("weapon_club_makeshift")`. `UISystem.ShowTutorial("Equip_Weapon")`.
    - `OnInteract("item_thorny_bush")`: `InventorySystem.AddItem("shield_bush_makeshift")`. `UISystem.ShowTutorial("Equip_Shield")`.
  - **UI/UX:** Появляется базовый интерфейс. Подсказки обучают, как экипировать предметы в правую (меч) и левую (щит) руку.

### Сцена 2: Первая ночь
- **Локация:** Лес у реки (Z=0)
- **Тип сцены:** Геймплей / Выживание
- **Ключевая задача игрока:** Развести костер и пережить ночь.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnItemEquipped("weapon_club_makeshift")` и `OnItemEquipped("shield_bush_makeshift")`.
  - **Системные взаимодействия:**
    - `QuestSystem.UpdateObjective("act1_01_survivor", "Найдите место для лагеря и разведите костер")`.
    - `WorldStateSystem.StartDayNightCycle()`.
    - `OnInteract("campfire_spot")` с нужными ресурсами (дрова) позволяет развести костер и "промотать" время до утра.
  - **Результат:** `QuestSystem.CompleteQuest("act1_01_survivor")`. `QuestSystem.StartQuest("act1_02_road_home", "Вернитесь в деревню и узнайте о судьбе близких")`.

---

## Глава 2: Дорога домой

### Сцена 1: Возвращение
- **Локация:** Окрестности родной деревни (Z=0)
- **Тип сцены:** Геймплей / Бой
- **Ключевая задача игрока:** Пробиться к руинам кузни.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("village_outskirts")`.
  - **Системные взаимодействия:**
    - `WorldStateSystem.LoadMap("village_destroyed_populated")`.
    - `EnemySpawner.SpawnGroup("bandits_level_1", 5)`.
    - `QuestSystem.UpdateObjective("act1_02_road_home", "Найдите руины вашей кузни")`.

### Сцена 2: Восстановление основ
- **Локация:** Руины кузни (Z=0)
- **Тип сцены:** Геймплей / Крафт
- **Ключевая задача игрока:** Восстановить кузню и выковать первый настоящий предмет.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("forge_ruins")`.
  - **Системные взаимодействия:**
    - `QuestSystem.UpdateObjective("act1_02_road_home", "Соберите уцелевшие инструменты")`.
    - После сбора: `QuestSystem.UpdateObjective("act1_02_road_home", "Выкуйте железный кинжал")`.
    - `CraftingSystem.UnlockRecipe("recipe_iron_dagger")`.
    - `OnItemCrafted("item_iron_dagger")`: `QuestSystem.CompleteQuest("act1_02_road_home")`. `ProgressionSystem.AddXP(150, "Forge_Restored")`.

---

## Глава 3: Город выживших

### Сцена 1: Прибытие в "Приют"
- **Локация:** Торговый город "Приют" (Z=0)
- **Тип сцены:** Исследование
- **Ключевая задача игрока:** Найти торговца Элиаса.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnQuestCompleted("act1_02_road_home")` -> `QuestSystem.StartQuest("main_03_rare_metals", "Отправляйтесь в Приют и найдите торговца Элиаса")`.
  - `OnEnterZone("city_gate")`: `WorldStateSystem.LoadMap("city_hub")`.
  - **UI/UX:** На карте появляется маркер, указывающий на лавку "Товары Элиаса".

### Сцена 2: Лицо из прошлого
- **Локация:** Лавка "Товары Элиаса" (Z=0)
- **Тип сцены:** Интерактивный диалог
- **Ключевая задача игрока:** Поговорить с торговцем.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("elias_shop")`.
  - **Системные взаимодействия:** `DialogueSystem.Start("elias_recognition_dialogue")`.

### Сцена 3: Искра надежды
- **Локация:** Лавка "Товары Элиаса" (Z=0)
- **Тип сцены:** Кат-сцена / Диалог
- **Ключевая задача игрока:** Узнать о выживших.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnDialogueNodeReached("elias_main_revelation")`.
  - **Системные взаимодействия:**
    - `CutsceneSystem.Play("elias_story_flashback")`.
    - `QuestSystem.CompleteQuest("main_03_rare_metals")`.
    - `QuestSystem.StartQuest("main_04_family_hope", "Найдите следы на болотах")`.

---

## Глава 4: Первые следы и первая искра

### Сцена 1: Гиблые топи
- **Локация:** Старые Болота (Z=0)
- **Тип сцены:** Исследование / Бой
- **Ключевая задача игрока:** Найти 3 улики.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("swamp_entrance")`.
  - **Системные взаимодействия:**
    - `WorldStateSystem.LoadMap("swamp_map")`.
    - `EnemySpawner.SpawnGroup("swamp_creatures_level_1", 10)`.
    - Интерактивные объекты-улики разбросаны по карте.

### Сцена 2: Битва за брата
- **Локация:** Лагерь разбойников на болотах (Z=0)
- **Тип сцены:** Бой / Мини-босс
- **Ключевая задача игрока:** Победить главаря бандитов.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnAllCluesFound("main_04_family_hope")`.
  - **Системные взаимодействия:**
    - `MapSystem.RevealLocation("bandit_camp")`.
    - `EnemySpawner.Spawn("bandit_leader_boris")`.
    - `NPCSpawner.Spawn("brother_warrior_captured")`.

### Сцена 3: Таинственный лут
- **Локация:** Лагерь разбойников (Z=0)
- **Тип сцены:** Открытие / Обучение через действие
- **Ключевая задача игрока:** Освободить брата и изучить добычу.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnemyKilled("bandit_leader_boris")`.
  - **Системные взаимодействия:**
    - `CutsceneSystem.Play("freeing_the_brother")`.
    - `LootSystem.DropSpecific(boss_id, ["item_notched_axe_socketed", "item_ember_amber"])`.
    - `OnItemEnhanced("notched_axe_socketed", "ember_amber")`: `InventorySystem.TransformItem("notched_axe_socketed" -> "ember_axe_lvl1")`.
    - `QuestSystem.StartQuest("discovery_01_strange_stones", "Этот камень делает оружие огненным. Нужно найти больше таких.")`.

---

## Глава 5: Рефлексия у наковальни

### Сцена 1: Возвращение домой
- **Локация:** Восстановленная кузня (Z=0)
- **Тип сцены:** Диалог / Завершение Акта I
- **Ключевая задача игрока:** Поговорить с братом.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("home_forge_with_brother")`.
  - **Системные взаимодействия:** `DialogueSystem.Start("act1_final_dialogue")`.
  - **Результат:** Акт I завершен. Игрок получает глобальные цели на Акт II.