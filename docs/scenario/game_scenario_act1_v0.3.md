# Игровой сценарий: "Последний Кузнец" - Акт I
- **Версия:** 0.3 (Сюжетное расширение)
- **Автор:** Gemini
- **Дата:** 2025-08-07

---

## Глава 1: У реки
*Содержание этой главы полностью соответствует `game_scenario_v0.1.md`. Игрок сбегает из деревни через туннель и оказывается на берегу реки, где его первая задача — выжить.*

---

## Глава 2: Шепот из прошлого
*Содержание этой главы полностью соответствует `game_scenario_act1_v0.2.md`. Игрок находит хижину отца, пробуждает магию и знакомится с улучшением предметов.*

---

## Глава 3: Дорога домой
*Содержание этой главы полностью соответствует `game_scenario_act1_v0.2.md`. Игрок возвращается в разрушенную деревню и начинает ее восстановление.*

---

## Глава 4: Город выживших

### Синопсис
Спустя некоторое время, частично восстановив кузню и набравшись опыта, игрок отправляется в ближайший торговый город-лагерь в поисках редких материалов и информации о варварах. Там его ждет встреча, которая навсегда изменит его цель.

---

### Сцена 1: Прибытие в "Приют"
- **Локация:** Торговый город "Приют" (Z=0)
- **Тип сцены:** Исследование / Социальное взаимодействие
- **Ключевая задача игрока:** Найти торговца редкими металлами.

- **Описание и ход сцены:**
  Игрок прибывает в оживленный, но потрепанный город, ставший центром для беженцев. Он слышит обрывки разговоров о набегах, видит раненых. Его цель, полученная из записей отца — найти особый тугоплавкий металл, который можно купить только у опытных торговцев.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("city_gate")`.
  - **Системные взаимодействия:**
    - `QuestSystem.StartQuest("main_03_rare_metals", "Найдите торговца Элиаса")`.
    - `WorldStateSystem.LoadMap("city_hub")`.
    - `NPCSpawner.SpawnGroup("city_refugees_and_merchants")`.
  - **UI/UX:** На карте появляется маркер, указывающий на лавку "Товары Элиаса".

---

### Сцена 2: Лицо из прошлого
- **Локация:** Лавка "Товары Элиаса" (Z=0)
- **Тип сцены:** Интерактивный диалог
- **Ключевая задача игрока:** Поговорить с торговцем.

- **Описание и ход сцены:**
  Игрок заходит в лавку. Пожилой торговец Элиас долго и пристально смотрит на него, после чего его лицо меняется. Он узнает в окрепшем молодом человеке одного из детей того самого кузнеца.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("elias_shop")`.
  - **Системные взаимодействия:**
    - `DialogueSystem.Start("elias_recognition_dialogue")`.
  - **Диалог:**
    - **Элиас:** "Постой-ка... эти глаза. Я знаю эти глаза. Ты... ты один из сыновей [Имя Отца]? Клянусь всеми богами, я думал, вы все погибли! Я Элиас, мы жили по соседству. Ты был совсем юн, вряд ли меня помнишь..."
    - **Игрок:** (Шокирован) "Вы... вы тоже оттуда? Я думал, я один..."

---

### Сцена 3: Искра надежды
- **Локация:** Лавка "Товары Элиаса" (Z=0)
- **Тип сцены:** Кат-сцена / Диалог
- **Ключевая задача игрока:** Узнать правду.

- **Описание и ход сцены:**
  Элиас отводит игрока в заднюю комнату. Он рассказывает, что в том хаосе, когда он сам бежал, он видел, как группа детей спаслась, убегая в сторону болот. Он не уверен, но ему показалось, что он узнал среди них некоторых из детей кузнеца.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnDialogueNodeReached("elias_main_revelation")`.
  - **Системные взаимодействия:**
    - `CutsceneSystem.Play("elias_story_flashback")`: Короткое, размытое видение убегающих детей.
    - `QuestSystem.CompleteQuest("main_03_rare_metals")`.
    - `QuestSystem.StartQuest("main_04_family_hope", "Найдите следы на болотах")`: **Новый основной квест, который становится главным приоритетом.**
  - **Диалог:**
    - **Элиас:** "...Я не мог им помочь, меня бы заметили. Они бежали к Старым Болотам. Я не знаю, выжили ли они там, это гиблое место. Но если есть хоть один шанс... ты должен проверить. Я слышал, твой старший брат, [Имя брата-воина], всегда говорил, что болота безопаснее леса, если знаешь тропы."
  - **Результат:** Мотивация игрока кардинально меняется. Месть отходит на второй план перед надеждой найти семью.

---

## Глава 5: Первые следы

### Синопсис
Потрясенный и ведомый новой надеждой, игрок отправляется на Старые Болота. Ему предстоит найти следы своих родных и, возможно, спасти первого из них.

---

### Сцена 1: Гиблые топи
- **Локация:** Старые Болота (Z=0)
- **Тип сцены:** Исследование / Бой
- **Ключевая задача игрока:** Найти лагерь выживших или следы пребывания.

- **Описание и ход сцены:**
  Болота — опасная локация с новыми врагами (топкие твари, ядовитые растения) и ловушками. Игрок должен внимательно исследовать местность, ища любые признаки того, что здесь проходили люди.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("swamp_entrance")`.
  - **Системные взаимодействия:**
    - `WorldStateSystem.LoadMap("swamp_map")`.
    - `EnemySpawner.SpawnGroup("swamp_creatures_level_1", 10)`.
    - `QuestSystem.UpdateObjective("main_04_family_hope", "Найдите 3 улики на болотах")`.
  - **Геймплей:** Уликами могут быть: обрывок ткани, потухший костер, сломанная стрела знакомой работы. Каждая улика — интерактивный объект.

---

### Сцена 2: Спасение
- **Локация:** Лагерь разбойников на болотах (Z=0)
- **Тип сцены:** Бой / Кат-сцена
- **Ключевая задача игрока:** Победить мини-босса и спасти брата.

- **Описание и ход сцены:**
  Собрав улики, игрок находит небольшой лагерь разбойников. В клетке он видит своего старшего брата-воина. Игроку предстоит сразиться с главарем банды, чтобы освободить его.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnAllCluesFound("main_04_family_hope")`.
  - **Системные взаимодействия:**
    - `MapSystem.RevealLocation("bandit_camp")`.
    - `EnemySpawner.Spawn("bandit_leader_boris")`.
    - `NPCSpawner.Spawn("brother_warrior_captured")`.
    - `OnEnemyKilled("bandit_leader_boris")` запускает кат-сцену освобождения.
  - **Результат:**
    - `CompanionSystem.UnlockCompanion("companion_warrior")`.
    - `QuestSystem.CompleteQuest("main_04_family_hope")`.
    - Начинается первая персональная квестовая линия спутника.