# Игровой сценарий: "Последний Кузнец" - Акт I
- **Версия:** 0.2 (Расширенный)
- **Автор:** Gemini
- **Дата:** 2025-08-07

---

## Глава 1: У реки

*Содержание этой главы полностью соответствует `game_scenario_v0.1.md`. Игрок сбегает из деревни через туннель и оказывается на берегу реки, где его первая задача — выжить.*

---

## Глава 2: Шепот из прошлого

### Синопсис
В поисках убежища игрок находит заброшенную хижину, которая оказывается тайным святилищем его отца. Здесь он находит первый артефакт, который пробуждает в нем магические способности, и знакомится с основами системы улучшений оружия.

---

### Сцена 1: Убежище отшельника
- **Локация:** Заброшенная хижина в лесу (Z=0)
- **Тип сцены:** Исследование / Открытие
- **Ключевая задача игрока:** Найти безопасное место и разжечь костер.

- **Описание и ход сцены:**
  Следуя по тропе от реки, игрок находит ветхую хижину. Внутри пусто, но есть камин. Игроку нужно найти дрова, чтобы разжечь огонь и согреться.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("hut_interior")`.
  - **Системные взаимодействия:**
    - `QuestSystem.UpdateObjective("act1_01_survivor", "Найдите дрова для костра")`.
    - Внутри хижины и вокруг нее разбросаны интерактивные объекты `item_firewood`.
    - `OnInteract("fireplace")` с `item_firewood` в инвентаре запускает кат-сцену.
  - **UI/UX:** Подсказка: "Слишком холодно. Нужно разжечь огонь".

---

### Сцена 2: Отцовский тайник
- **Локация:** Хижина, секретный подпол (Z=0)
- **Тип сцены:** Кат-сцена / Обучение
- **Ключевая задача игрока:** Открыть тайник и получить первый артефакт.

- **Описание и ход сцены:**
  Когда игрок разжигает огонь, тепло от камина проявляет на полу скрытые руны. Одна из половиц подсвечивается. Игрок открывает тайник, где лежит шкатулка, а в ней — **тусклый магический кристалл** и **старый кинжал с пустым гнездом**.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnFireplaceLit`.
  - **Системные взаимодействия:**
    - `VFX.Play("runes_appear_on_floor")`.
    - `OnInteract("loose_floorboard")` открывает доступ к `item_fathers_cache`.
    - `InventorySystem.AddItem("item_dull_crystal")`.
    - `InventorySystem.AddItem("item_socketed_dagger")`.
    - `QuestSystem.StartQuest("act1_03_whispers", "Изучите кристалл")`.
  - **UI/UX:** Появляется полоска маны (пустая). Появляется уведомление о новом квесте.

---

### Сцена 3: Пробуждение магии
- **Локация:** Хижина (Z=0)
- **Тип сцены:** Интерактивная кат-сцена / Обучение
- **Ключевая задача игрока:** Использовать кристалл и изучить первое заклинание.

- **Описание и ход сцены:**
  Когда игрок берет кристалл в руки, тот вспыхивает светом, и игрок видит короткое видение: отец объясняет ему, что их род имеет предрасположенность к магии, и этот кристалл — ключ. После видения игрок получает свое первое заклинание.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnItemUsed("item_dull_crystal")`.
  - **Системные взаимодействия:**
    - `CutsceneSystem.Play("father_magic_vision")`.
    - `MagicSystem.LearnSpell("spell_fire_spark")`.
    - `PlayerStats.SetMana(10)`: Кристалл дает немного маны.
    - `QuestSystem.UpdateObjective("act1_03_whispers", "Вставьте кристалл в кинжал")`.
  - **UI/UX:**
    - Полоска маны заполняется на 10%.
    - В интерфейсе появляется иконка заклинания "Огненная искра".
    - Подсказка по использованию магии.

---

### Сцена 4: Первое улучшение
- **Локация:** Хижина (Z=0)
- **Тип сцены:** Геймплей / Обучение
- **Ключевая задача игрока:** Улучшить кинжал с помощью кристалла.

- **Описание и ход сцены:**
  Следуя цели квеста, игрок должен открыть инвентарь и вставить кристалл в гнездо кинжала. Это его первое знакомство с системой улучшений.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnItemEnhanced("item_socketed_dagger", "item_dull_crystal")`.
  - **Системные взаимодействия:**
    - `UISystem.ShowTutorial("item_socketing")`: Открывается интерфейс инвентаря с подсветкой кинжала и кристалла.
    - `InventorySystem.RemoveItem("item_dull_crystal")`.
    - `InventorySystem.TransformItem("item_socketed_dagger" -> "item_lesser_fire_dagger")`: Кинжал получает бонус к огненному урону.
    - `QuestSystem.CompleteQuest("act1_03_whispers")`.
    - `ProgressionSystem.AddXP(100, "First_Enhancement")`.
  - **UI/UX:** Уведомление: "Предмет улучшен! Теперь ваш кинжал наносит дополнительный урон огнем".

---

## Глава 3: Дорога домой

### Синопсис
Обретя новые силы, игрок решает двигаться дальше. Он встречает выжившего торговца, который рассказывает ему о ситуации в мире и дает первую зацепку, ведущую обратно в его разрушенную деревню.

---

### Сцена 1: Встреча на дороге
- **Локация:** Лесная дорога (Z=0)
- **Тип сцены:** Интерактивный диалог
- **Ключевая задача игрока:** Узнать, что случилось с миром.

- **Описание и ход сцены:**
  Игрок выходит из леса на старую дорогу, где видит разбитую повозку и торговца, отбивающегося от пары волков. Игрок помогает ему.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("road_ambush_trigger")`.
  - **Системные взаимодействия:**
    - `EnemySpawner.Spawn("wolf_tutorial_02", 2)`.
    - `NPCSpawner.Spawn("npc_merchant_giles")`.
    - После боя `DialogueSystem.Start("merchant_giles_intro")`.
  - **Диалог:** Торговец благодарит игрока и рассказывает, что банды варваров и разбойников теперь повсюду. Он упоминает, что видел дым над родной деревней игрока и что там могут быть ценные материалы для кузнеца.

---

### Сцена 2: Первый выбор
- **Локация:** Лесная дорога (Z=0)
- **Тип сцены:** Диалог / Ветвление квеста
- **Ключевая задача игрока:** Решить, как поступить дальше.

- **Описание и ход сцены:**
  Торговец предлагает игроку сделку: помочь ему добраться до ближайшего города в обмен на снаряжение или же дать карту и припасы для путешествия в одиночку к родной деревне.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnDialogueNodeReached("merchant_giles_offer")`.
  - **Системные взаимодействия:**
    - **Вариант 1 (Помочь):** `QuestSystem.StartQuest("side_01_escort_giles")`. Игрок должен сопроводить NPC до города. Награда: `item_sturdy_leather_armor`.
    - **Вариант 2 (Отказаться):** `InventorySystem.AddItem("item_map_to_village")`. `InventorySystem.AddItem("item_rations", 3)`. `QuestSystem.StartQuest("main_02_road_home")`.
  - **UI/UX:** В диалоговом окне представлены два четких варианта выбора.

---

### Сцена 3: Возвращение
- **Локация:** Окрестности родной деревни (Z=0)
- **Тип сцены:** Геймплей / Бой
- **Ключевая задача игрока:** Пробиться к руинам кузни.

- **Описание и ход сцены:**
  Игрок добирается до окраин своей деревни. Местность кишит разбойниками и дикими зверями. Ему предстоит с боем пробиваться к центру деревни, где находятся руины его дома.

- **Техническая реализация и геймплей:**
  - **Триггеры:** `OnEnterZone("village_outskirts")`.
  - **Системные взаимодействия:**
    - `WorldStateSystem.LoadMap("village_destroyed_populated")`: Загружается карта деревни, но теперь с врагами.
    - `EnemySpawner.SpawnGroup("bandits_level_1", 5)`.
    - `QuestSystem.UpdateObjective("main_02_road_home", "Найдите руины вашей кузни")`.
  - **Геймплей:** Игроку нужно использовать все полученные навыки (бой, магия, улучшенное оружие), чтобы справиться с врагами, которые сильнее обычных волков.
  - **Результат:** Достигнув руин кузни, игрок завершает главу и начинает долгий путь по ее восстановлению, что станет центральной темой следующего акта.