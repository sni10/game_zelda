# Issue #05: –°–∏—Å—Ç–µ–º–∞ –ò–ò –≤—Ä–∞–≥–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã –≤—Ä–∞–≥–æ–≤ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è, –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –∏ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏–º–∏ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—è–º–∏.

## –¶–µ–ª—å
–°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –≤—Ä–∞–≥–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –∫ –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–µ.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –¢–∏–ø—ã –≤—Ä–∞–≥–æ–≤

#### –•–æ–¥—è—á–∏–µ –≤—Ä–∞–≥–∏
- [ ] **–°—Ç—Ä–µ–ª–æ–∫**:
  - [ ] –†–∞–∑–º–µ—Ä: 32x32, –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
  - [ ] –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É
  - [ ] –ê—Ç–∞–∫–∞: –¥–∞–ª—å–Ω—è—è —Å—Ç—Ä–µ–ª—å–±–∞ —Å—Ç—Ä–µ–ª–∞–º–∏
  - [ ] –ò–ò: –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞, –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–∏
  - [ ] –î—Ä–æ–ø: —Å—Ç—Ä–µ–ª—ã, –æ–ø—ã—Ç, –∏–Ω–æ–≥–¥–∞ –ª—É–∫
- [ ] **–ú–µ—á–Ω–∏–∫**:
  - [ ] –†–∞–∑–º–µ—Ä: 32x32, —Ç–µ–º–Ω–æ-–∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç
  - [ ] –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ
  - [ ] –ê—Ç–∞–∫–∞: –±–ª–∏–∂–Ω—è—è —Ä—É–∫–æ–ø–∞—à–Ω–∞—è
  - [ ] –ò–ò: –ø—Ä—è–º–æ–µ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ, –∞—Ç–∞–∫–∞ –≤ —É–ø–æ—Ä
  - [ ] –î—Ä–æ–ø: –æ—Ä—É–∂–∏–µ –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è, –æ–ø—ã—Ç

#### –ë—ã—Å—Ç—Ä—ã–µ –≤—Ä–∞–≥–∏
- [ ] **–ë–µ–≥–∞—é—â–∏–π –±–æ–µ—Ü**:
  - [ ] –†–∞–∑–º–µ—Ä: 28x28, –æ—Ä–∞–Ω–∂–µ–≤—ã–π —Ü–≤–µ—Ç
  - [ ] –ü–æ–≤–µ–¥–µ–Ω–∏–µ: –±—ã—Å—Ç—Ä–æ–µ –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ, —É–∫–ª–æ–Ω–µ–Ω–∏–µ
  - [ ] –¢–∞–∫—Ç–∏–∫–∞: –ø–æ–¥–±–µ–≥ ‚Üí —Å–µ—Ä–∏—è —É–¥–∞—Ä–æ–≤ ‚Üí –æ—Ç–±–µ–≥
  - [ ] –ò–ò: —Ö–∏—Ç—Ä–æ–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–∑–±–µ–≥–∞–Ω–∏–µ –∞—Ç–∞–∫
  - [ ] –î—Ä–æ–ø: –∑–µ–ª—å—è —Å–∫–æ—Ä–æ—Å—Ç–∏, –æ–ø—ã—Ç

#### –ú–∞–≥–∏—á–µ—Å–∫–∏–µ –≤—Ä–∞–≥–∏ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
- [ ] **–≠–ª–µ–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –º–∞–≥**:
  - [ ] –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–¥–Ω—É –∏–∑ —Ç—Ä–µ—Ö —Å—Ç–∏—Ö–∏–π
  - [ ] –î–∞–ª—å–Ω–∏–µ –º–∞–≥–∏—á–µ—Å–∫–∏–µ –∞—Ç–∞–∫–∏
  - [ ] –¢–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è –ø—Ä–∏ –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - [ ] –î—Ä–æ–ø: –º–∞–≥–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥–º–µ—Ç—ã, —Ä—É–Ω—ã

### –°–∏—Å—Ç–µ–º–∞ –ò–ò

#### –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] **PATROL** - –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ:
  - [ ] –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –º–∞—Ä—à—Ä—É—Ç—É
  - [ ] –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞ –≤ —Ä–∞–¥–∏—É—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
  - [ ] –í–æ–∑–≤—Ä–∞—Ç –∫ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—é –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ —Ü–µ–ª–∏
- [ ] **ALERT** - –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ:
  - [ ] –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é
  - [ ] –£–≤–µ–ª–∏—á–µ–Ω–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –¥–≤–∏–∂–µ–Ω–∏—è
  - [ ] –í—ã–∑–æ–≤ –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏—è (–≥—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ)
- [ ] **COMBAT** - –±–æ–π:
  - [ ] –ê–∫—Ç–∏–≤–Ω—ã–µ –∞—Ç–∞–∫–∏ –ø–æ –∏–≥—Ä–æ–∫—É
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–µ–π
  - [ ] –ü–æ–ø—ã—Ç–∫–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¥–ª—è –≥—Ä—É–ø–ø)
- [ ] **RETREAT** - –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ:
  - [ ] –ü—Ä–∏ –Ω–∏–∑–∫–æ–º –∑–¥–æ—Ä–æ–≤—å–µ
  - [ ] –ü–æ–∏—Å–∫ —É–∫—Ä—ã—Ç–∏—è –∏–ª–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤
  - [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–µ—á–µ–±–Ω—ã—Ö –ø—Ä–µ–¥–º–µ—Ç–æ–≤

#### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ò–ò
- [ ] **–†–∞–¥–∏—É—Å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è**: 100-150 –ø–∏–∫—Å–µ–ª–µ–π
- [ ] **–†–∞–¥–∏—É—Å –∞—Ç–∞–∫–∏**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∏–ø–∞ –≤—Ä–∞–≥–∞
- [ ] **–°–∫–æ—Ä–æ—Å—Ç—å –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: 60 –ø–∏–∫—Å/—Å–µ–∫
- [ ] **–°–∫–æ—Ä–æ—Å—Ç—å –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è**: 100 –ø–∏–∫—Å/—Å–µ–∫
- [ ] **–í—Ä–µ–º—è –ø–∞–º—è—Ç–∏**: 5 —Å–µ–∫—É–Ω–¥ –ø–æ—Å–ª–µ –ø–æ—Ç–µ—Ä–∏ –∏–≥—Ä–æ–∫–∞

### –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
- [ ] **–ö–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –∞—Ç–∞–∫**:
  - [ ] –í—Ä–∞–≥–∏ –∞—Ç–∞–∫—É—é—Ç —Å —Ä–∞–∑–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω
  - [ ] –°—Ç—Ä–µ–ª–∫–∏ –ø—Ä–∏–∫—Ä—ã–≤–∞—é—Ç –º–µ—á–Ω–∏–∫–æ–≤
  - [ ] –ë—ã—Å—Ç—Ä—ã–µ –≤—Ä–∞–≥–∏ –æ—Ç–≤–ª–µ–∫–∞—é—Ç –≤–Ω–∏–º–∞–Ω–∏–µ
- [ ] **–°–∏—Å—Ç–µ–º–∞ —Å–∏–≥–Ω–∞–ª–æ–≤**:
  - [ ] –í—Ä–∞–≥–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç–∏
  - [ ] –†–∞–¥–∏—É—Å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞
  - [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ç—Ä–µ–≤–æ–≥–∏

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### ECS Components –¥–ª—è —Å–∏—Å—Ç–µ–º—ã –ò–ò
```python
# src/core/ecs/ai_components.py
class AIComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞"""
    def __init__(self, ai_type: str):
        self.ai_type = ai_type  # ARCHER, WARRIOR, RUNNER, MAGE
        self.current_state = None
        self.target = None
        self.detection_radius = 120
        self.attack_radius = 40
        self.memory_time = 5000  # –º—Å
        self.last_seen_player_pos = None
        self.last_seen_time = 0

class PatrolComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è"""
    def __init__(self, patrol_points: List[tuple]):
        self.patrol_points = patrol_points
        self.current_point_index = 0
        self.patrol_speed = 60
        self.wait_time_at_point = 2000  # –º—Å
        self.current_wait_time = 0

class GroupBehaviorComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è"""
    def __init__(self, group_id: str):
        self.group_id = group_id
        self.group_members = []
        self.is_group_leader = False
        self.communication_radius = 150
        self.last_alert_time = 0

class CombatAIComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –±–æ–µ–≤–æ–≥–æ –ò–ò"""
    def __init__(self):
        self.preferred_distance = 0  # 0 –¥–ª—è –±–ª–∏–∂–Ω–µ–≥–æ –±–æ—è, >0 –¥–ª—è –¥–∞–ª—å–Ω–µ–≥–æ
        self.retreat_health_threshold = 0.3  # –æ—Ç—Å—Ç—É–ø–∞—Ç—å –ø—Ä–∏ 30% –∑–¥–æ—Ä–æ–≤—å—è
        self.aggression_level = 1.0  # –º–Ω–æ–∂–∏—Ç–µ–ª—å –∞–≥—Ä–µ—Å—Å–∏–≤–Ω–æ—Å—Ç–∏
        self.combat_tactics = []
```

#### State Pattern –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –ò–ò
```python
# src/ai/behavior_states.py
class AIState(ABC):
    """–ë–∞–∑–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ò–ò"""
    
    @abstractmethod
    def enter(self, entity: Entity):
        pass
    
    @abstractmethod
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        pass
    
    @abstractmethod
    def exit(self, entity: Entity):
        pass

class IdleState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–æ–∫–æ—è"""
    def enter(self, entity: Entity):
        # –°–±—Ä–æ—Å —Ü–µ–ª–µ–π –∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –¥–≤–∏–∂–µ–Ω–∏—è
        ai_comp = entity.get_component(AIComponent)
        ai_comp.target = None
    
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        ai_comp = entity.get_component(AIComponent)
        
        # –ü–æ–∏—Å–∫ –∏–≥—Ä–æ–∫–∞ –≤ —Ä–∞–¥–∏—É—Å–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è
        player = world.get_player()
        if self._can_see_player(entity, player):
            ai_comp.target = player
            return AlertState()
        
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—é –µ—Å–ª–∏ –µ—Å—Ç—å –º–∞—Ä—à—Ä—É—Ç
        patrol_comp = entity.get_component(PatrolComponent)
        if patrol_comp and patrol_comp.patrol_points:
            return PatrolState()
        
        return None

class PatrolState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è"""
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        ai_comp = entity.get_component(AIComponent)
        patrol_comp = entity.get_component(PatrolComponent)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
        player = world.get_player()
        if self._can_see_player(entity, player):
            ai_comp.target = player
            self._alert_group_members(entity, world)
            return AlertState()
        
        # –î–≤–∏–∂–µ–Ω–∏–µ –ø–æ –º–∞—Ä—à—Ä—É—Ç—É –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è
        self._move_to_next_patrol_point(entity, dt)
        return None

class AlertState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–µ–≤–æ–≥–∏"""
    def enter(self, entity: Entity):
        ai_comp = entity.get_component(AIComponent)
        ai_comp.last_seen_time = pygame.time.get_ticks()
    
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        ai_comp = entity.get_component(AIComponent)
        
        if ai_comp.target:
            # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—é
            return ChaseState()
        
        # –ü–æ—Ç–µ—Ä—è —Ü–µ–ª–∏ - –≤–æ–∑–≤—Ä–∞—Ç –∫ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—é
        current_time = pygame.time.get_ticks()
        if current_time - ai_comp.last_seen_time > ai_comp.memory_time:
            return PatrolState()
        
        return None

class ChaseState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è"""
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        ai_comp = entity.get_component(AIComponent)
        combat_comp = entity.get_component(CombatAIComponent)
        
        if not ai_comp.target:
            return AlertState()
        
        distance_to_target = self._get_distance(entity, ai_comp.target)
        
        # –ü–µ—Ä–µ—Ö–æ–¥ –∫ –±–æ—é –µ—Å–ª–∏ —Ü–µ–ª—å –≤ —Ä–∞–¥–∏—É—Å–µ –∞—Ç–∞–∫–∏
        if distance_to_target <= ai_comp.attack_radius:
            return CombatState()
        
        # –î–≤–∏–∂–µ–Ω–∏–µ –∫ —Ü–µ–ª–∏
        self._move_towards_target(entity, ai_comp.target, dt)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ
        health_comp = entity.get_component(HealthComponent)
        if (health_comp.current_hp / health_comp.max_hp) < combat_comp.retreat_health_threshold:
            return RetreatState()
        
        return None

class CombatState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –±–æ—è"""
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        ai_comp = entity.get_component(AIComponent)
        combat_comp = entity.get_component(CombatAIComponent)
        
        if not ai_comp.target:
            return AlertState()
        
        # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±–æ–µ–≤–æ–π —Ç–∞–∫—Ç–∏–∫–∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –≤—Ä–∞–≥–∞
        self._execute_combat_behavior(entity, ai_comp.target, dt)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ
        health_comp = entity.get_component(HealthComponent)
        if (health_comp.current_hp / health_comp.max_hp) < combat_comp.retreat_health_threshold:
            return RetreatState()
        
        # –ï—Å–ª–∏ —Ü–µ–ª—å –¥–∞–ª–µ–∫–æ - –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞—Ç—å
        distance = self._get_distance(entity, ai_comp.target)
        if distance > ai_comp.attack_radius * 1.5:
            return ChaseState()
        
        return None

class RetreatState(AIState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏—è"""
    def update(self, entity: Entity, world: World, dt: float) -> Optional[AIState]:
        # –ü–æ–∏—Å–∫ —É–∫—Ä—ã—Ç–∏—è –∏–ª–∏ —Å–æ—é–∑–Ω–∏–∫–æ–≤
        safe_position = self._find_safe_position(entity, world)
        self._move_towards_position(entity, safe_position, dt)
        
        # –í–æ–∑–≤—Ä–∞—Ç –∫ –±–æ—é –µ—Å–ª–∏ –∑–¥–æ—Ä–æ–≤—å–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å
        health_comp = entity.get_component(HealthComponent)
        if health_comp.current_hp / health_comp.max_hp > 0.7:
            return ChaseState()
        
        return None
```

#### Strategy Pattern –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤
```python
# src/ai/enemy_strategies.py
class EnemyBehaviorStrategy(ABC):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤—Ä–∞–≥–∞"""
    
    @abstractmethod
    def execute_combat(self, entity: Entity, target: Entity, dt: float):
        pass
    
    @abstractmethod
    def get_preferred_distance(self) -> float:
        pass

class ArcherStrategy(EnemyBehaviorStrategy):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ª—É—á–Ω–∏–∫–∞"""
    def execute_combat(self, entity: Entity, target: Entity, dt: float):
        # –ü–æ–¥–¥–µ—Ä–∂–∞–Ω–∏–µ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –∏ —Å—Ç—Ä–µ–ª—å–±–∞
        distance = self._get_distance(entity, target)
        preferred_distance = self.get_preferred_distance()
        
        if distance < preferred_distance:
            # –û—Ç—Å—Ç—É–ø–∏—Ç—å –Ω–∞ –±–µ–∑–æ–ø–∞—Å–Ω—É—é –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
            self._move_away_from_target(entity, target, dt)
        elif distance > preferred_distance * 1.5:
            # –ü—Ä–∏–±–ª–∏–∑–∏—Ç—å—Å—è –¥–ª—è —Ç–æ—á–Ω–æ–π —Å—Ç—Ä–µ–ª—å–±—ã
            self._move_towards_target(entity, target, dt)
        else:
            # –°—Ç—Ä–µ–ª—è—Ç—å
            self._shoot_at_target(entity, target)
    
    def get_preferred_distance(self) -> float:
        return 100  # –ø–∏–∫—Å–µ–ª–µ–π

class WarriorStrategy(EnemyBehaviorStrategy):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –≤–æ–∏–Ω–∞"""
    def execute_combat(self, entity: Entity, target: Entity, dt: float):
        # –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–µ –∏ –∞—Ç–∞–∫–∞
        distance = self._get_distance(entity, target)
        
        if distance > 32:  # –¥–∞–ª—å–Ω–æ—Å—Ç—å –º–µ—á–∞
            self._move_towards_target(entity, target, dt)
        else:
            self._melee_attack(entity, target)
    
    def get_preferred_distance(self) -> float:
        return 32  # –±–ª–∏–∂–Ω–∏–π –±–æ–π

class RunnerStrategy(EnemyBehaviorStrategy):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤—Ä–∞–≥–∞"""
    def execute_combat(self, entity: Entity, target: Entity, dt: float):
        # –¢–∞–∫—Ç–∏–∫–∞ "–ø–æ–¥–±–µ–≥-—É–¥–∞—Ä-–æ—Ç–±–µ–≥"
        combat_comp = entity.get_component(CombatAIComponent)
        
        if not hasattr(combat_comp, 'attack_phase'):
            combat_comp.attack_phase = 'approach'
            combat_comp.phase_timer = 0
        
        combat_comp.phase_timer += dt
        
        if combat_comp.attack_phase == 'approach':
            self._move_towards_target(entity, target, dt * 1.5)  # –±—ã—Å—Ç—Ä–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
            if self._get_distance(entity, target) < 40:
                combat_comp.attack_phase = 'attack'
                combat_comp.phase_timer = 0
        
        elif combat_comp.attack_phase == 'attack':
            self._melee_attack(entity, target)
            if combat_comp.phase_timer > 500:  # 0.5 —Å–µ–∫—É–Ω–¥—ã –∞—Ç–∞–∫–∏
                combat_comp.attack_phase = 'retreat'
                combat_comp.phase_timer = 0
        
        elif combat_comp.attack_phase == 'retreat':
            self._move_away_from_target(entity, target, dt * 1.2)
            if combat_comp.phase_timer > 1000:  # 1 —Å–µ–∫—É–Ω–¥–∞ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏—è
                combat_comp.attack_phase = 'approach'
                combat_comp.phase_timer = 0
```

#### Observer Pattern –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
```python
# src/ai/group_behavior.py
class GroupBehaviorSystem(System):
    """–°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è"""
    def __init__(self, event_system: EventSystem):
        self.event_system = event_system
        self.groups = {}  # group_id -> [entities]
        
        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
        self.event_system.subscribe("enemy_alerted", self.handle_enemy_alert)
        self.event_system.subscribe("enemy_died", self.handle_enemy_death)
    
    def handle_enemy_alert(self, event: EnemyAlertEvent):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–µ–≤–æ–≥–∏ –≤—Ä–∞–≥–∞"""
        alerting_entity = event.entity
        group_comp = alerting_entity.get_component(GroupBehaviorComponent)
        
        if group_comp:
            # –û–ø–æ–≤–µ—â–µ–Ω–∏–µ –≤—Å–µ—Ö —á–ª–µ–Ω–æ–≤ –≥—Ä—É–ø–ø—ã
            for member in group_comp.group_members:
                if member != alerting_entity:
                    self._alert_group_member(member, event.player_position)
    
    def _alert_group_member(self, entity: Entity, player_pos: tuple):
        """–û–ø–æ–≤–µ—â–µ–Ω–∏–µ —á–ª–µ–Ω–∞ –≥—Ä—É–ø–ø—ã"""
        ai_comp = entity.get_component(AIComponent)
        group_comp = entity.get_component(GroupBehaviorComponent)
        
        # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
        distance = self._get_distance_to_position(entity, player_pos)
        if distance <= group_comp.communication_radius:
            ai_comp.last_seen_player_pos = player_pos
            ai_comp.last_seen_time = pygame.time.get_ticks()
            
            # –ü–µ—Ä–µ—Ö–æ–¥ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–µ–≤–æ–≥–∏
            ai_comp.current_state = AlertState()

class CoordinatedAttackStrategy:
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ç–∞–∫–∏"""
    def __init__(self, group_members: List[Entity]):
        self.group_members = group_members
        self.formation_positions = self._calculate_formation()
    
    def execute_coordinated_attack(self, target: Entity):
        """–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∞—Ç–∞–∫–∏"""
        for i, member in enumerate(self.group_members):
            formation_pos = self.formation_positions[i]
            target_pos = self._calculate_attack_position(target, formation_pos)
            
            # –ö–∞–∂–¥—ã–π —á–ª–µ–Ω –≥—Ä—É–ø–ø—ã –¥–≤–∏–∂–µ—Ç—Å—è –∫ —Å–≤–æ–µ–π –ø–æ–∑–∏—Ü–∏–∏
            self._move_to_formation_position(member, target_pos)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
src/
‚îú‚îÄ‚îÄ core/ecs/
‚îÇ   ‚îî‚îÄ‚îÄ ai_components.py          # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–ò
‚îú‚îÄ‚îÄ ai/
‚îÇ   ‚îú‚îÄ‚îÄ behavior_states.py        # –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è (State Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ enemy_strategies.py       # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—Ä–∞–≥–æ–≤ (Strategy Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ group_behavior.py         # –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (Observer Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ pathfinding.py            # –ü–æ–∏—Å–∫ –ø—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ ai_system.py              # –û—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ò–ò (ECS System)
‚îÇ   ‚îî‚îÄ‚îÄ state_machine.py          # –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
‚îú‚îÄ‚îÄ entities/
‚îÇ   ‚îú‚îÄ‚îÄ enemy_factory.py          # –§–∞–±—Ä–∏–∫–∞ –≤—Ä–∞–≥–æ–≤ (Abstract Factory)
‚îÇ   ‚îî‚îÄ‚îÄ enemy_types.py            # –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤—Ä–∞–≥–æ–≤
‚îî‚îÄ‚îÄ events/
    ‚îî‚îÄ‚îÄ ai_events.py              # –°–æ–±—ã—Ç–∏—è –ò–ò
```

### –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è
- `src/core/ecs/ai_components.py` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–ò
- `src/ai/behavior_states.py` - —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è (State Pattern)
- `src/ai/enemy_strategies.py` - —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—Ä–∞–≥–æ–≤ (Strategy Pattern)
- `src/ai/group_behavior.py` - –≥—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ (Observer Pattern)
- `src/ai/ai_system.py` - –æ—Å–Ω–æ–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –ò–ò (ECS System)
- `src/ai/state_machine.py` - –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- `src/entities/enemy_factory.py` - —Ñ–∞–±—Ä–∏–∫–∞ –≤—Ä–∞–≥–æ–≤
- `src/events/ai_events.py` - —Å–æ–±—ã—Ç–∏—è –ò–ò
- `src/ai/pathfinding.py` - –ø–æ–∏—Å–∫ –ø—É—Ç–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ò–ò
```python
class EnemyAI:
    def __init__(self, enemy, detection_radius, attack_radius):
        self.enemy = enemy
        self.state = AIState.PATROL
        self.target = None
        self.patrol_points = []
        self.detection_radius = detection_radius
        
    def update(self, dt, player_pos):
        if self.state == AIState.PATROL:
            self.patrol_behavior(dt)
        elif self.state == AIState.COMBAT:
            self.combat_behavior(dt, player_pos)
```

### –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] **–ú–∞—Ä—à—Ä—É—Ç—ã –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è**:
  - [ ] –õ–∏–Ω–µ–π–Ω—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã (—Ç—É–¥–∞-–æ–±—Ä–∞—Ç–Ω–æ)
  - [ ] –ö—Ä—É–≥–æ–≤—ã–µ –º–∞—Ä—à—Ä—É—Ç—ã
  - [ ] –°–ª—É—á–∞–π–Ω–æ–µ –±–ª—É–∂–¥–∞–Ω–∏–µ –≤ –æ–±–ª–∞—Å—Ç–∏
- [ ] **–¢–æ—á–∫–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞**:
  - [ ] –°—Ç–∞—Ü–∏–æ–Ω–∞—Ä–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏ (–æ—Ö—Ä–∞–Ω–∞)
  - [ ] –ö–ª—é—á–µ–≤—ã–µ –ª–æ–∫–∞—Ü–∏–∏ –¥–ª—è –∑–∞—â–∏—Ç—ã
  - [ ] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –æ–±–ª–∞—Å—Ç—è–º–∏

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```ini
[ENEMY_AI]
detection_radius = 120
attack_radius = 40
patrol_speed = 60
chase_speed = 100
memory_time = 5000

[ENEMY_TYPES]
archer_health = 50
archer_damage = 15
warrior_health = 80
warrior_damage = 25
runner_health = 30
runner_damage = 20
runner_speed = 140
```

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ú–∏–Ω–∏–º—É–º 3 —Ç–∏–ø–∞ –≤—Ä–∞–≥–æ–≤ —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º
- [ ] –ò–ò –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [ ] –ü–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∞–Ω–∏–π
- [ ] –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä—É–µ—Ç—Å—è
- [ ] –í—Ä–∞–≥–∏ –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞—é—Ç –≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è—Ö
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –ø—Ä–∏ 10+ –≤—Ä–∞–≥–∞—Ö

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–í—ã—Å–æ–∫–∏–π** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤—Ä–∞–≥–æ–≤ (Enemy)
- Issue #04 (–û—Ä—É–∂–∏–µ) - –¥–ª—è –¥—Ä–æ–ø–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–∞
- –°—Ç—Ä–µ–ª–∫–∏ –¥–æ–ª–∂–Ω—ã –¥–µ—Ä–∂–∞—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏—é
- –ú–µ—á–Ω–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–ø–∞—Å–Ω—ã –≤ –±–ª–∏–∂–Ω–µ–º –±–æ—é
- –ë—ã—Å—Ç—Ä—ã–µ –≤—Ä–∞–≥–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É—è–∑–≤–∏–º—ã –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ç–∞–∫—Ç–∏–∫–µ
- –ì—Ä—É–ø–ø–æ–≤—ã–µ –∞—Ç–∞–∫–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–ø–æ–±–µ–¥–∏–º—ã–º–∏

## –†–∞—Å—à–∏—Ä–µ–Ω–∏—è (–Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
- [ ] **–≠–ª–∏—Ç–Ω—ã–µ –≤—Ä–∞–≥–∏**: —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏
- [ ] **–ë–æ—Å—Å—ã**: —Å–ª–æ–∂–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã –∞—Ç–∞–∫
- [ ] **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –ò–ò**: –∏–∑—É—á–µ–Ω–∏–µ —Ç–∞–∫—Ç–∏–∫–∏ –∏–≥—Ä–æ–∫–∞
- [ ] **–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∞–∫—Ü–∏–∏**: —Å—Ç—Ä–∞—Ö, —è—Ä–æ—Å—Ç—å, –ø–∞–Ω–∏–∫–∞

## –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
4-5 –Ω–µ–¥–µ–ª—å

## –°–≤—è–∑–∞–Ω–Ω—ã–µ issues
- #04 (–û—Ä—É–∂–∏–µ) - –¥—Ä–æ–ø –ø—Ä–µ–¥–º–µ—Ç–æ–≤
- #07 (Event boxes) - —Å–ø–∞—É–Ω –≤—Ä–∞–≥–æ–≤
- #08 (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å) - —Å–∏—Å—Ç–µ–º–∞ –¥—Ä–æ–ø–∞
- #09 (–ö–≤–µ—Å—Ç—ã) - –≤—Ä–∞–≥–∏ –∫–∞–∫ —Ü–µ–ª–∏ –∫–≤–µ—Å—Ç–æ–≤

---

## –ü–æ–¥–∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üß† –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ò–ò
**–¶–µ–ª—å**: –°–æ–∑–¥–∞–Ω–∏–µ ECS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –±–∞–∑–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –¥–ª—è –ò–ò

#### 1.1 ECS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–ò
- [ ] –°–æ–∑–¥–∞—Ç—å `src/core/ecs/ai_components.py` - AIComponent, PatrolComponent, GroupBehaviorComponent
- [ ] –°–æ–∑–¥–∞—Ç—å CombatAIComponent –¥–ª—è –±–æ–µ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_components.py` - unit —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ò–ò
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–ò —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é

#### 1.2 –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –ò–ò
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/ai_events.py` - EnemyAlertEvent, EnemyAttackEvent, EnemyDeathEvent
- [ ] –°–æ–∑–¥–∞—Ç—å GroupCommunicationEvent –¥–ª—è –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π –ò–ò
- [ ] –°–æ–±—ã—Ç–∏—è –ò–ò –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π

#### 1.3 –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ò–ò –∫–∞–∫ ECS System
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/ai_system.py` - —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è AISystem (ECS System)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –ò–ò
- [ ] –°–∏—Å—Ç–µ–º–∞ –ò–ò –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å—É—â–Ω–æ—Å—Ç–∏ —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏ –ò–ò

### ü§ñ –§–∞–∑–∞ 2: State Pattern –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤—Ä–∞–≥–æ–≤
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –ø–æ–≤–µ–¥–µ–Ω–∏—è

#### 2.1 –ë–∞–∑–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/behavior_states.py` - AIState, IdleState, PatrolState
- [ ] –°–æ–∑–¥–∞—Ç—å AlertState, ChaseState, CombatState, RetreatState
- [ ] –°–æ–∑–¥–∞—Ç—å `test_behavior_states.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –í—Å–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –¥—Ä—É–≥ –≤ –¥—Ä—É–≥–∞

#### 2.2 –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/state_machine.py` - StateMachine –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ –∏ —É—Å–ª–æ–≤–∏–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_state_machine.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∞—à–∏–Ω—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —É–ø—Ä–∞–≤–ª—è–µ—Ç –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –≤—Ä–∞–≥–æ–≤

#### 2.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å –ò–ò
- [ ] –û–±–Ω–æ–≤–∏—Ç—å AISystem –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–∞—à–∏–Ω–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å StateTransitionSystem (ECS System)
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_state_integration.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–π
- [ ] –í—Ä–∞–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

### üìä –§–∞–∑–∞ 3: Strategy Pattern –¥–ª—è —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤
**–¶–µ–ª—å**: –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ø–æ–≤–µ–¥–µ–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤

#### 3.1 –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –≤—Ä–∞–≥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/enemy_strategies.py` - EnemyBehaviorStrategy, ArcherStrategy
- [ ] –°–æ–∑–¥–∞—Ç—å WarriorStrategy, RunnerStrategy
- [ ] –°–æ–∑–¥–∞—Ç—å `test_enemy_strategies.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –≤—Ä–∞–≥–æ–≤
- [ ] –ö–∞–∂–¥–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –∏–º–µ–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ –±–æ–µ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

#### 3.2 –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å MageStrategy –¥–ª—è –º–∞–≥–∏—á–µ—Å–∫–∏—Ö –≤—Ä–∞–≥–æ–≤ (—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ)
- [ ] –°–æ–∑–¥–∞—Ç—å BossStrategy –¥–ª—è –æ—Å–æ–±—ã—Ö –≤—Ä–∞–≥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_advanced_strategies.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- [ ] –°–ª–æ–∂–Ω—ã–µ –≤—Ä–∞–≥–∏ –∏–º–µ—é—Ç —Å–ª–æ–∂–Ω–æ–µ —Ç–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

#### 3.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [ ] –°–≤—è–∑–∞—Ç—å —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å StrategyManager –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π —Å–º–µ–Ω—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_strategy_state_integration.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- [ ] –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ —Ä–∞–∑–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö

### üó∫Ô∏è –§–∞–∑–∞ 4: –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
**–¶–µ–ª—å**: –ü–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ –≤—Ä–∞–≥–æ–≤ –∏ –ø–æ–∏—Å–∫ –ø—É—Ç–∏

#### 4.1 –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å PatrolSystem (ECS System) –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞–º–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ª–∏–Ω–µ–π–Ω—ã—Ö, –∫—Ä—É–≥–æ–≤—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –∏ —Å–ª—É—á–∞–π–Ω–æ–≥–æ –±–ª—É–∂–¥–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å `test_patrol_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –í—Ä–∞–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ç—Ä—É–ª–∏—Ä—É—é—Ç –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º –º–∞—Ä—à—Ä—É—Ç–∞–º

#### 4.2 –ë–∞–∑–æ–≤—ã–π –ø–æ–∏—Å–∫ –ø—É—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/pathfinding.py` - –ø—Ä–æ—Å—Ç–µ–π—à–∏–π pathfinding –¥–ª—è –æ–±—Ö–æ–¥–∞ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–ª–ª–∏–∑–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_pathfinding.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏
- [ ] –í—Ä–∞–≥–∏ –Ω–µ –∑–∞—Å—Ç—Ä–µ–≤–∞—é—Ç –≤ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è—Ö –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –∫ —Ü–µ–ª–∏

#### 4.3 –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- [ ] –°–æ–∑–¥–∞—Ç—å ChaseSystem (ECS System) –¥–ª—è —É–º–Ω–æ–≥–æ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–≥—Ä–æ–∫–∞
- [ ] –ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ –ø—É—Ç–∏ –∏–≥—Ä–æ–∫–∞ –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å `test_chase_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è
- [ ] –í—Ä–∞–≥–∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–µ—Å–ª–µ–¥—É—é—Ç –∏–≥—Ä–æ–∫–∞

### üë• –§–∞–∑–∞ 5: –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
**–¶–µ–ª—å**: Observer Pattern –¥–ª—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—Ä–∞–≥–æ–≤

#### 5.1 –°–∏—Å—Ç–µ–º–∞ –≥—Ä—É–ø–ø–æ–≤–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ai/group_behavior.py` - GroupBehaviorSystem (ECS System + Observer)
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–∏–≥–Ω–∞–ª–æ–≤ —Ç—Ä–µ–≤–æ–≥–∏ –º–µ–∂–¥—É –≤—Ä–∞–≥–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_group_behavior.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è
- [ ] –í—Ä–∞–≥–∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –æ–± –æ–ø–∞—Å–Ω–æ—Å—Ç–∏

#### 5.2 –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ç–∞–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å CoordinatedAttackStrategy –¥–ª—è –≥—Ä—É–ø–ø–æ–≤—ã—Ö –∞—Ç–∞–∫
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ñ–æ—Ä–º–∞—Ü–∏–π –∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `test_coordinated_attacks.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞—Ç–∞–∫
- [ ] –ì—Ä—É–ø–ø—ã –≤—Ä–∞–≥–æ–≤ –∞—Ç–∞–∫—É—é—Ç –∫–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ

#### 5.3 –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç–∞–∫—Ç–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∞–∫—Ç–∏–∫–∏: "—Ç–∞–Ω–∫+–ª—É—á–Ω–∏–∫", "–æ–∫—Ä—É–∂–µ–Ω–∏–µ", "–æ—Ç–≤–ª–µ—á–µ–Ω–∏–µ"
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π –≤ –≥—Ä—É–ø–ø–µ (–ª–∏–¥–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∫–∞, –∞—Ç–∞–∫–∞)
- [ ] –°–æ–∑–¥–∞—Ç—å `test_group_tactics.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä—É–ø–ø–æ–≤—ã—Ö —Ç–∞–∫—Ç–∏–∫
- [ ] –ì—Ä—É–ø–ø—ã –≤—Ä–∞–≥–æ–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ

### üéØ –§–∞–∑–∞ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–¶–µ–ª—å**: –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –°–≤—è–∑–∞—Ç—å –ò–ò —Å —Å–∏—Å—Ç–µ–º–æ–π –∞—Ç–∞–∫–∏ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è —É—Ä–æ–Ω–∞
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∞—Ç–∞–∫–∏ –∏–≥—Ä–æ–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ò–ò –≤—Ä–∞–≥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_combat_integration.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –±–æ–µ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] –ò–ò –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –∞—Ç–∞–∫–∏ –∏ –Ω–∞–Ω–æ—Å–∏—Ç –æ—Ç–≤–µ—Ç–Ω—ã–π —É—Ä–æ–Ω

#### 6.2 –§–∞–±—Ä–∏–∫–∞ –≤—Ä–∞–≥–æ–≤ —Å –ò–ò
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/entities/enemy_factory.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –ò–ò –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ –≤—Ä–∞–≥–æ–≤ —Å –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è–º–∏ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_enemy_factory_ai.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏ –≤—Ä–∞–≥–æ–≤ —Å –ò–ò
- [ ] –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –≤—Ä–∞–≥–æ–≤ —Å–æ–∑–¥–∞—é—Ç—Å—è —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º –ò–ò

#### 6.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ò–ò –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –≤—Ä–∞–≥–æ–≤
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Ä–∞—Å—á–µ—Ç–æ–≤ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –ø–æ–∏—Å–∫–∞ –ø—É—Ç–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_ai_performance.py` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ò–ò
- [ ] –°–∏—Å—Ç–µ–º–∞ –ò–ò —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å 10+ –≤—Ä–∞–≥–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ

---

## üå≥ –î–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ–¥–∑–∞–¥–∞—á

```
–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ò–ò
‚îú‚îÄ‚îÄ 1.1 ECS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ò–ò
‚îú‚îÄ‚îÄ 1.2 –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –ò–ò (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1)
‚îî‚îÄ‚îÄ 1.3 –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ò–ò (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1, 1.2)

–§–∞–∑–∞ 2: State Pattern –¥–ª—è –ø–æ–≤–µ–¥–µ–Ω–∏—è
‚îú‚îÄ‚îÄ 2.1 –ë–∞–∑–æ–≤—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1)
‚îú‚îÄ‚îÄ 2.2 –ú–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1)
‚îî‚îÄ‚îÄ 2.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.2, 1.3)

–§–∞–∑–∞ 3: Strategy Pattern –¥–ª—è —Ç–∏–ø–æ–≤ –≤—Ä–∞–≥–æ–≤
‚îú‚îÄ‚îÄ 3.1 –ë–∞–∑–æ–≤—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1)
‚îú‚îÄ‚îÄ 3.2 –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.1)
‚îî‚îÄ‚îÄ 3.3 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.2, 2.3)

–§–∞–∑–∞ 4: –°–∏—Å—Ç–µ–º–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ 4.1 –°–∏—Å—Ç–µ–º–∞ –ø–∞—Ç—Ä—É–ª–∏—Ä–æ–≤–∞–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1)
‚îú‚îÄ‚îÄ 4.2 –ü–æ–∏—Å–∫ –ø—É—Ç–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.3)
‚îî‚îÄ‚îÄ 4.3 –°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 4.1, 4.2)

–§–∞–∑–∞ 5: –ì—Ä—É–ø–ø–æ–≤–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ  
‚îú‚îÄ‚îÄ 5.1 –ì—Ä—É–ø–ø–æ–≤–∞—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.2, 3.3)
‚îú‚îÄ‚îÄ 5.2 –ö–æ–æ—Ä–¥–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞—Ç–∞–∫–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 5.1)
‚îî‚îÄ‚îÄ 5.3 –ì—Ä—É–ø–ø–æ–≤—ã–µ —Ç–∞–∫—Ç–∏–∫–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 5.2)

–§–∞–∑–∞ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –±–æ–µ–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
‚îú‚îÄ‚îÄ 6.2 –§–∞–±—Ä–∏–∫–∞ –≤—Ä–∞–≥–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 6.1)
‚îî‚îÄ‚îÄ 6.3 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å**: 1.1 ‚Üí 1.2 ‚Üí 1.3 ‚Üí 2.1 ‚Üí 2.2 ‚Üí 2.3 ‚Üí 6.1 ‚Üí 6.3

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**: 
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ò–ò –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–∏—Å—Ç–µ–º –ò–ò  
- –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –≤—Ä–∞–≥–∞—Ö
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 90% –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ò–ò