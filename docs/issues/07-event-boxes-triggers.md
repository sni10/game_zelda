# Issue #07: –°–∏—Å—Ç–µ–º–∞ Event Boxes –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

## –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–æ–Ω (Event Boxes) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –≤ –∏–≥—Ä–æ–≤–æ–º –º–∏—Ä–µ.

## –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –∏ –¥–∏–Ω–∞–º–∏–∫—É –≤ –∏–≥—Ä–æ–≤–æ–π –º–∏—Ä —á–µ—Ä–µ–∑ —Å–∏—Å—Ç–µ–º—É —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –∏ —Å–æ–±—ã—Ç–∏–π.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –¢–∏–ø—ã Event Boxes

#### –ü–æ—Ä—Ç–∞–ª—ã –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è
- [ ] **–¢–∞–π–ª—ã –ø–æ—Ä—Ç–∞–ª–æ–≤**:
  - [ ] –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ç–∏–ø —Ç–∞–π–ª–∞ —Å –≤–∏–∑—É–∞–ª—å–Ω—ã–º–∏ —ç—Ñ—Ñ–µ–∫—Ç–∞–º–∏
  - [ ] –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—Ä—Ç–∞–ª–∞ (–≤—Ä–∞—â–µ–Ω–∏–µ, —Å–≤–µ—á–µ–Ω–∏–µ)
  - [ ] –ó–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**:
  - [ ] –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏ –Ω–∞—Å—Ç—É–ø–∞–Ω–∏–∏ –∏–≥—Ä–æ–∫–∞
  - [ ] –ú–µ–Ω—é –≤—ã–±–æ—Ä–∞ –º–∏—Ä–∞ –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
  - [ ] –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞
- [ ] **–£—Å–ª–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è**:
  - [ ] –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–æ—Ä—Ç–∞–ª–∞
  - [ ] –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –∏–ª–∏ —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä–æ–∫–∞
  - [ ] –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã

#### –°–ø–∞—É–Ω –≤—Ä–∞–≥–æ–≤
- [ ] **–¢—Ä–∏–≥–≥–µ—Ä—ã –ø–æ—è–≤–ª–µ–Ω–∏—è**:
  - [ ] –ù–µ–≤–∏–¥–∏–º—ã–µ –∑–æ–Ω—ã –Ω–∞ –∫–∞—Ä—Ç–µ
  - [ ] –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏–≥—Ä–æ–∫–∞
  - [ ] –û–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–µ –∏ –º–Ω–æ–≥–æ—Ä–∞–∑–æ–≤—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] **–¢–∏–ø—ã —Å–ø–∞—É–Ω–∞**:
  - [ ] –í–Ω–µ–∑–∞–ø–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –∏–∑ "–∫—É—Å—Ç–æ–≤"
  - [ ] –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –º–∞—Ç–µ—Ä–∏–∞–ª–∏–∑–æ–≤–∞–Ω–∏–µ
  - [ ] –í—ã—Ö–æ–¥ –∏–∑ —Å–∫—Ä—ã—Ç—ã—Ö –º–µ—Å—Ç
- [ ] **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–ø–∞—É–Ω–∞**:
  - [ ] –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ä–∞–≥–æ–≤ (1-5)
  - [ ] –¢–∏–ø—ã –≤—Ä–∞–≥–æ–≤
  - [ ] –£—Ä–æ–≤–µ–Ω—å —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
  - [ ] –ö—É–ª–¥–∞—É–Ω –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ —Å–ø–∞—É–Ω–∞

#### –°—É–Ω–¥—É–∫–∏ –∏ –ª—É—Ç
- [ ] **–°—É–Ω–¥—É–∫–∏ —Å —Å–æ–∫—Ä–æ–≤–∏—â–∞–º–∏**:
  - [ ] –í–∏–∑—É–∞–ª—å–Ω–∞—è –º–æ–¥–µ–ª—å —Å—É–Ω–¥—É–∫–∞
  - [ ] –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è
  - [ ] –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: –ø—Ä–µ–¥–º–µ—Ç—ã, –∑–æ–ª–æ—Ç–æ, –æ–ø—ã—Ç
- [ ] **–°–∫—Ä—ã—Ç—ã–µ —Å–æ–∫—Ä–æ–≤–∏—â–∞**:
  - [ ] –ù–µ–≤–∏–¥–∏–º—ã–µ –¥–æ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - [ ] –¢—Ä–µ–±—É—é—Ç –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏–ª–∏ —Ä–µ—à–µ–Ω–∏—è –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
  - [ ] –†–µ–¥–∫–∏–µ –∏ —Ü–µ–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã
- [ ] **–°–∏—Å—Ç–µ–º–∞ –ª—É—Ç–∞**:
  - [ ] –°–ª—É—á–∞–π–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
  - [ ] –£—Ä–æ–≤–µ–Ω—å –ª—É—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±–ª–∞—Å—Ç–∏
  - [ ] –£–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥–º–µ—Ç—ã –≤ –æ—Å–æ–±—ã—Ö —Å—É–Ω–¥—É–∫–∞—Ö

#### –ê–∫—Ç–∏–≤–∞—Ü–∏—è NPC –∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- [ ] **–¢–æ—Ä–≥–æ–≤—Ü—ã**:
  - [ ] –ü–æ—è–≤–ª–µ–Ω–∏–µ —Ç–æ—Ä–≥–æ–≤—Ü–∞ –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–æ—Ä–≥–æ–≤—Ü—ã (–∏—Å—á–µ–∑–∞—é—Ç —á–µ—Ä–µ–∑ –≤—Ä–µ–º—è)
  - [ ] –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–∞–≥–∞–∑–∏–Ω—ã
- [ ] **–ö–≤–µ—Å—Ç–æ–¥–∞—Ç–µ–ª–∏**:
  - [ ] NPC –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–ª—è –≤—ã–¥–∞—á–∏ –∫–≤–µ—Å—Ç–æ–≤
  - [ ] –£—Å–ª–æ–≤–Ω–∞—è –∞–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –ø—Ä–æ–≥—Ä–µ—Å—Å—É
  - [ ] –¶–µ–ø–æ—á–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∫–≤–µ—Å—Ç–æ–≤
- [ ] **–£—Å–ª—É–≥–∏**:
  - [ ] –õ–µ—á–µ–Ω–∏–µ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ
  - [ ] –£–ª—É—á—à–µ–Ω–∏–µ —ç–∫–∏–ø–∏—Ä–æ–≤–∫–∏
  - [ ] –û–±—É—á–µ–Ω–∏–µ –Ω–∞–≤—ã–∫–∞–º

#### –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏
- [ ] **–ú–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏**:
  - [ ] –ö–Ω–æ–ø–∫–∏, —Ä—ã—á–∞–≥–∏, –ø–ª–∏—Ç—ã –¥–∞–≤–ª–µ–Ω–∏—è
  - [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã
  - [ ] –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≥–æ–ª–æ–≤–æ–ª–æ–º–∫–∏
- [ ] **–°–µ–∫—Ä–µ—Ç–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—ã**:
  - [ ] –°–∫—Ä—ã—Ç—ã–µ –¥–≤–µ—Ä–∏ –∏ —Å—Ç–µ–Ω—ã
  - [ ] –ê–∫—Ç–∏–≤–∞—Ü–∏—è –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π
  - [ ] –î–æ—Å—Ç—É–ø –∫ —Å–µ–∫—Ä–µ—Ç–Ω—ã–º –æ–±–ª–∞—Å—Ç—è–º
- [ ] **–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏**:
  - [ ] –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
  - [ ] –ü–∞–∑–∑–ª—ã —Å –ø—Ä–µ–¥–º–µ—Ç–∞–º–∏
  - [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

#### –í—Ö–æ–¥—ã –≤ —Ç–æ–Ω–Ω–µ–ª–∏
- [ ] **–ü–µ—Ä–µ—Ö–æ–¥—ã –Ω–∞ Z-—É—Ä–æ–≤–Ω–∏**:
  - [ ] –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∞–π–ª—ã-–≤—Ö–æ–¥—ã
  - [ ] –ü–ª–∞–≤–Ω—ã–π –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ –ø–æ–¥–∑–µ–º–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å
  - [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è
- [ ] **–°–≤—è–∑—å —Å —Å–∏—Å—Ç–µ–º–æ–π Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç**:
  - [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Issue #02
  - [ ] –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ
  - [ ] –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –∫–∞–º–µ—Ä—ã

#### –°—é–∂–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
- [ ] **–ö–∞—Ç—Å—Ü–µ–Ω—ã**:
  - [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∏–∞–ª–æ–≥–∏
  - [ ] –î–≤–∏–∂–µ–Ω–∏–µ –∫–∞–º–µ—Ä—ã
  - [ ] –í—Ä–µ–º–µ–Ω–Ω–∞—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [ ] **–ò–∑–º–µ–Ω–µ–Ω–∏—è –º–∏—Ä–∞**:
  - [ ] –ü–æ—è–≤–ª–µ–Ω–∏–µ/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤
  - [ ] –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞
  - [ ] –û—Ç–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### ECS Components –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π
```python
# src/core/ecs/event_components.py
class EventBoxComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –æ–±–ª–∞—Å—Ç–∏ —Å–æ–±—ã—Ç–∏—è"""
    def __init__(self, x: int, y: int, width: int, height: int):
        self.rect = pygame.Rect(x, y, width, height)
        self.event_type = None
        self.parameters = {}
        self.activated = False
        self.cooldown_time = 0
        self.current_cooldown = 0
        self.one_time_only = False

class TriggerComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç—Ä–∏–≥–≥–µ—Ä–∞"""
    def __init__(self, trigger_type: str):
        self.trigger_type = trigger_type  # ENTER, EXIT, INTERACT, TIMER
        self.conditions = []
        self.actions = []
        self.is_active = True

class SpawnTriggerComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–ø–∞—É–Ω–∞ –≤—Ä–∞–≥–æ–≤"""
    def __init__(self, enemy_types: List[str], spawn_count: int):
        self.enemy_types = enemy_types
        self.spawn_count = spawn_count
        self.spawn_radius = 64
        self.max_spawned_entities = 5
        self.current_spawned = []
        self.respawn_time = 30000  # –º—Å

class LootTriggerComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –ª—É—Ç–∞"""
    def __init__(self, loot_table: dict):
        self.loot_table = loot_table
        self.is_opened = False
        self.respawn_time = -1  # -1 = –Ω–µ —Ä–µ—Å–ø–∞–≤–Ω–∏—Ç—Å—è
        self.visual_state = "closed"
```

#### Observer Pattern –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π
```python
# src/events/event_system.py
class EventSystem(System):
    """–°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –∫–∞–∫ —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π Observer"""
    def __init__(self):
        self._listeners = defaultdict(list)
        self._event_queue = []
    
    def subscribe(self, event_type: str, callback: Callable):
        """–ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è"""
        self._listeners[event_type].append(callback)
    
    def unsubscribe(self, event_type: str, callback: Callable):
        """–û—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏–π"""
        if callback in self._listeners[event_type]:
            self._listeners[event_type].remove(callback)
    
    def emit(self, event: GameEvent):
        """–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è"""
        self._event_queue.append(event)
    
    def process_events(self):
        """–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—á–µ—Ä–µ–¥–∏ —Å–æ–±—ã—Ç–∏–π"""
        while self._event_queue:
            event = self._event_queue.pop(0)
            for callback in self._listeners[event.type]:
                callback(event)

class EventBoxSystem(System):
    """–°–∏—Å—Ç–µ–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ Event Boxes"""
    def __init__(self, event_system: EventSystem):
        self.event_system = event_system
        
        # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è
        self.event_system.subscribe("player_moved", self.check_event_boxes)
        self.event_system.subscribe("player_interacted", self.handle_interaction)
    
    def check_event_boxes(self, event: PlayerMovedEvent):
        """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ —Å Event Boxes"""
        player_pos = event.new_position
        
        for entity in self.get_entities_with_component(EventBoxComponent):
            event_box_comp = entity.get_component(EventBoxComponent)
            
            if event_box_comp.rect.collidepoint(player_pos):
                if not event_box_comp.activated or not event_box_comp.one_time_only:
                    self._trigger_event_box(entity, event.player)
    
    def _trigger_event_box(self, event_box_entity: Entity, player: Entity):
        """–ê–∫—Ç–∏–≤–∞—Ü–∏—è Event Box"""
        event_box_comp = event_box_entity.get_component(EventBoxComponent)
        trigger_comp = event_box_entity.get_component(TriggerComponent)
        
        if trigger_comp and trigger_comp.is_active:
            # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–∏–≥–≥–µ—Ä–∞
            for action in trigger_comp.actions:
                action.execute(event_box_entity, player)
            
            event_box_comp.activated = True
            event_box_comp.current_cooldown = event_box_comp.cooldown_time
```

#### Command Pattern –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
```python
# src/events/trigger_actions.py
class TriggerAction(ABC):
    """–ë–∞–∑–æ–≤–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤"""
    
    @abstractmethod
    def execute(self, trigger_entity: Entity, player: Entity) -> bool:
        pass
    
    @abstractmethod
    def undo(self, trigger_entity: Entity, player: Entity) -> bool:
        pass

class SpawnEnemiesAction(TriggerAction):
    """–î–µ–π—Å—Ç–≤–∏–µ —Å–ø–∞—É–Ω–∞ –≤—Ä–∞–≥–æ–≤"""
    def __init__(self, enemy_factory: EnemyFactory):
        self.enemy_factory = enemy_factory
        self.spawned_entities = []
    
    def execute(self, trigger_entity: Entity, player: Entity) -> bool:
        spawn_comp = trigger_entity.get_component(SpawnTriggerComponent)
        event_box_comp = trigger_entity.get_component(EventBoxComponent)
        
        if spawn_comp and len(spawn_comp.current_spawned) < spawn_comp.max_spawned_entities:
            spawn_center = event_box_comp.rect.center
            
            for _ in range(spawn_comp.spawn_count):
                enemy_type = random.choice(spawn_comp.enemy_types)
                enemy = self.enemy_factory.create_enemy(enemy_type, 1)
                
                # –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–∞–≥–∞
                spawn_pos = self._get_random_spawn_position(spawn_center, spawn_comp.spawn_radius)
                pos_comp = enemy.get_component(PositionComponent)
                pos_comp.x, pos_comp.y = spawn_pos
                
                spawn_comp.current_spawned.append(enemy)
                self.spawned_entities.append(enemy)
            
            return True
        return False

class OpenPortalAction(TriggerAction):
    """–î–µ–π—Å—Ç–≤–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è –ø–æ—Ä—Ç–∞–ª–∞"""
    def __init__(self, target_world: str, target_position: tuple):
        self.target_world = target_world
        self.target_position = target_position
    
    def execute(self, trigger_entity: Entity, player: Entity) -> bool:
        # –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–∞
        portal = Entity()
        portal.add_component(PortalComponent(self.target_world, self.target_position))
        portal.add_component(PositionComponent(*trigger_entity.get_component(EventBoxComponent).rect.center))
        portal.add_component(RenderComponent("portal_sprite"))
        
        # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–∞ –≤ –º–∏—Ä
        world = self._get_current_world()
        world.add_entity(portal)
        
        return True

class GiveLootAction(TriggerAction):
    """–î–µ–π—Å—Ç–≤–∏–µ –≤—ã–¥–∞—á–∏ –ª—É—Ç–∞"""
    def __init__(self, item_factory: ItemFactory):
        self.item_factory = item_factory
        self.given_items = []
    
    def execute(self, trigger_entity: Entity, player: Entity) -> bool:
        loot_comp = trigger_entity.get_component(LootTriggerComponent)
        
        if loot_comp and not loot_comp.is_opened:
            # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª—É—Ç–∞ –ø–æ —Ç–∞–±–ª–∏—Ü–µ
            generated_items = self._generate_loot(loot_comp.loot_table)
            
            # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å –∏–≥—Ä–æ–∫–∞
            inventory_comp = player.get_component(InventoryComponent)
            for item in generated_items:
                if inventory_comp.add_item(item):
                    self.given_items.append(item)
            
            loot_comp.is_opened = True
            loot_comp.visual_state = "opened"
            
            return True
        return False

class ActivateNPCAction(TriggerAction):
    """–î–µ–π—Å—Ç–≤–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ NPC"""
    def __init__(self, npc_factory: NPCFactory):
        self.npc_factory = npc_factory
        self.spawned_npc = None
    
    def execute(self, trigger_entity: Entity, player: Entity) -> bool:
        if not self.spawned_npc:
            # –°–æ–∑–¥–∞–Ω–∏–µ NPC
            npc_type = trigger_entity.get_component(EventBoxComponent).parameters.get("npc_type", "merchant")
            self.spawned_npc = self.npc_factory.create_npc(npc_type, 1)
            
            # –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ NPC
            spawn_pos = trigger_entity.get_component(EventBoxComponent).rect.center
            pos_comp = self.spawned_npc.get_component(PositionComponent)
            pos_comp.x, pos_comp.y = spawn_pos
            
            # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤ –º–∏—Ä
            world = self._get_current_world()
            world.add_entity(self.spawned_npc)
            
            return True
        return False
```

#### Factory Pattern –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Event Boxes
```python
# src/events/event_box_factory.py
class EventBoxFactory(ABC):
    """–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Event Boxes"""
    
    @abstractmethod
    def create_event_box(self, event_type: str, parameters: dict) -> Entity:
        pass

class StandardEventBoxFactory(EventBoxFactory):
    """–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ñ–∞–±—Ä–∏–∫–∞ Event Boxes"""
    def __init__(self, item_factory: ItemFactory, enemy_factory: EnemyFactory, npc_factory: NPCFactory):
        self.item_factory = item_factory
        self.enemy_factory = enemy_factory
        self.npc_factory = npc_factory
    
    def create_event_box(self, event_type: str, parameters: dict) -> Entity:
        entity = Entity()
        
        # –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
        entity.add_component(EventBoxComponent(
            parameters['x'], parameters['y'],
            parameters['width'], parameters['height']
        ))
        
        trigger_comp = TriggerComponent(parameters.get('trigger_type', 'ENTER'))
        
        # –°–æ–∑–¥–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è
        if event_type == "spawn_enemies":
            entity.add_component(SpawnTriggerComponent(
                parameters['enemy_types'],
                parameters['spawn_count']
            ))
            trigger_comp.actions.append(SpawnEnemiesAction(self.enemy_factory))
        
        elif event_type == "loot_chest":
            entity.add_component(LootTriggerComponent(parameters['loot_table']))
            trigger_comp.actions.append(GiveLootAction(self.item_factory))
        
        elif event_type == "portal":
            trigger_comp.actions.append(OpenPortalAction(
                parameters['target_world'],
                parameters['target_position']
            ))
        
        elif event_type == "activate_npc":
            trigger_comp.actions.append(ActivateNPCAction(self.npc_factory))
        
        entity.add_component(trigger_comp)
        return entity

class WorldSpecificEventBoxFactory(EventBoxFactory):
    """–§–∞–±—Ä–∏–∫–∞ Event Boxes –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∏—Ä–∞"""
    def __init__(self, world_type: str, base_factory: StandardEventBoxFactory):
        self.world_type = world_type
        self.base_factory = base_factory
    
    def create_event_box(self, event_type: str, parameters: dict) -> Entity:
        # –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –º–∏—Ä–∞
        if self.world_type == "ice_world":
            parameters = self._apply_ice_world_modifiers(parameters)
        elif self.world_type == "fire_world":
            parameters = self._apply_fire_world_modifiers(parameters)
        
        return self.base_factory.create_event_box(event_type, parameters)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
src/
‚îú‚îÄ‚îÄ core/ecs/
‚îÇ   ‚îî‚îÄ‚îÄ event_components.py       # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ events/
‚îÇ   ‚îú‚îÄ‚îÄ event_system.py           # –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π (Observer Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ event_box_system.py       # –°–∏—Å—Ç–µ–º–∞ Event Boxes (ECS System)
‚îÇ   ‚îú‚îÄ‚îÄ trigger_actions.py        # –î–µ–π—Å—Ç–≤–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (Command Pattern)
‚îÇ   ‚îú‚îÄ‚îÄ event_box_factory.py      # –§–∞–±—Ä–∏–∫–∞ Event Boxes (Factory Pattern)
‚îÇ   ‚îî‚îÄ‚îÄ game_events.py            # –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ world/
‚îÇ   ‚îú‚îÄ‚îÄ event_loader.py           # –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ world_events.py           # –°–æ–±—ã—Ç–∏—è –º–∏—Ä–∞
‚îî‚îÄ‚îÄ ui/
    ‚îî‚îÄ‚îÄ event_notifications.py    # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
```

### –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è
- `src/core/ecs/event_components.py` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–±—ã—Ç–∏–π
- `src/events/event_system.py` - —Å–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π (Observer Pattern)
- `src/events/event_box_system.py` - —Å–∏—Å—Ç–µ–º–∞ Event Boxes (ECS System)
- `src/events/trigger_actions.py` - –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ (Command Pattern)
- `src/events/event_box_factory.py` - —Ñ–∞–±—Ä–∏–∫–∞ Event Boxes (Factory Pattern)
- `src/events/game_events.py` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- `src/world/event_loader.py` - –∑–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- `src/ui/event_notifications.py` - —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
- `src/world/world.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –º–∏—Ä–æ–º

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π
```python
class EventBox:
    def __init__(self, x, y, width, height, event_type, parameters):
        self.rect = pygame.Rect(x, y, width, height)
        self.event_type = event_type
        self.parameters = parameters
        self.activated = False
        self.cooldown = 0
        
    def check_trigger(self, player_pos):
        if self.rect.collidepoint(player_pos):
            self.activate()
            
    def activate(self):
        # –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
        pass

class EventSystem:
    def __init__(self):
        self.event_boxes = []
        
    def update(self, dt, player_pos):
        for event_box in self.event_boxes:
            event_box.check_trigger(player_pos)
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
```ini
[EVENT_SYSTEM]
max_events_per_frame = 5
default_cooldown = 1000
portal_activation_delay = 500

[SPAWN_EVENTS]
max_enemies_per_spawn = 5
spawn_radius = 64
despawn_distance = 300

[LOOT_EVENTS]
common_loot_chance = 70
rare_loot_chance = 25
epic_loot_chance = 5
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] **–°–∏—Å—Ç–µ–º–∞ –º–∏—Ä–æ–≤**: –ø–æ—Ä—Ç–∞–ª—ã –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏
- [ ] **–°–∏—Å—Ç–µ–º–∞ –≤—Ä–∞–≥–æ–≤**: —Å–ø–∞—É–Ω –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- [ ] **–°–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–º–µ—Ç–æ–≤**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –ª—É—Ç–∞
- [ ] **–ö–≤–µ—Å—Ç–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞**: –∞–∫—Ç–∏–≤–∞—Ü–∏—è –∫–≤–µ—Å—Ç–æ–≤
- [ ] **Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã**: –≤—Ö–æ–¥—ã –≤ —Ç–æ–Ω–Ω–µ–ª–∏
- [ ] **–°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π**: —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π

### –†–µ–¥–∞–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] **–í–∏–∑—É–∞–ª—å–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä**:
  - [ ] –†–∞–∑–º–µ—â–µ–Ω–∏–µ Event Boxes –Ω–∞ –∫–∞—Ä—Ç–µ
  - [ ] –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å–æ–±—ã—Ç–∏–π
  - [ ] –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∑–æ–Ω –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] **–§–∞–π–ª–æ–≤—ã–π —Ñ–æ—Ä–º–∞—Ç**:
  - [ ] JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
  - [ ] –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ–±—ã—Ç–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏—Ä–∞
  - [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ú–∏–Ω–∏–º—É–º 6 —Ç–∏–ø–æ–≤ Event Boxes —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- [ ] –°–æ–±—ã—Ç–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è –ø—Ä–∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- [ ] –°–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–µ—Å—Å–∏—è–º–∏
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏ –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–í—ã—Å–æ–∫–∏–π** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –º–∏—Ä–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Issue #01 (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∏—Ä—ã) - –¥–ª—è –ø–æ—Ä—Ç–∞–ª–æ–≤
- Issue #02 (Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã) - –¥–ª—è –≤—Ö–æ–¥–æ–≤ –≤ —Ç–æ–Ω–Ω–µ–ª–∏
- Issue #05 (–í—Ä–∞–≥–∏) - –¥–ª—è —Å–ø–∞—É–Ω–∞
- Issue #08 (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å) - –¥–ª—è –ª—É—Ç–∞
- Issue #09 (–ö–≤–µ—Å—Ç—ã) - –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] –¢–µ—Å—Ç–æ–≤–∞—è –∫–∞—Ä—Ç–∞ —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ —Å–æ–±—ã—Ç–∏–π
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏

## –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
3-4 –Ω–µ–¥–µ–ª–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ issues
- #01 (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∏—Ä—ã) - –ø–æ—Ä—Ç–∞–ª—ã
- #02 (Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã) - —Ç–æ–Ω–Ω–µ–ª–∏
- #05 (–í—Ä–∞–≥–∏) - —Å–ø–∞—É–Ω
- #08 (–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å) - –ª—É—Ç
- #09 (–ö–≤–µ—Å—Ç—ã) - –∫–≤–µ—Å—Ç–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

---

## –ü–æ–¥–∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üì¶ –§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Event Boxes
**–¶–µ–ª—å**: –°–æ–∑–¥–∞–Ω–∏–µ –æ—Å–Ω–æ–≤—ã —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π –∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

#### 1.1 ECS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Event Boxes
- [ ] –°–æ–∑–¥–∞—Ç—å `src/core/ecs/event_components.py` - EventBoxComponent, TriggerComponent
- [ ] –°–æ–∑–¥–∞—Ç—å SpawnTriggerComponent, LootTriggerComponent –¥–ª—è —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_components.py` - unit —Ç–µ—Å—Ç—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–æ–±—ã—Ç–∏–π
- [ ] –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç —Å –±–∞–∑–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é

#### 1.2 Observer Pattern –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/event_system.py` - —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è EventSystem (Observer)
- [ ] –°–∏—Å—Ç–µ–º–∞ –ø–æ–¥–ø–∏—Å–∫–∏ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/game_events.py` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –±–∞–∑–æ–≤—ã—Ö –∏–≥—Ä–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ —Å–æ–±—ã—Ç–∏—è

#### 1.3 –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Event Boxes –∫–∞–∫ ECS System
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/event_box_system.py` - EventBoxSystem (ECS System)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–æ–±—ã—Ç–∏–π –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_box_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã Event Boxes
- [ ] –°–∏—Å—Ç–µ–º–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –∏–≥—Ä–æ–∫–∞ —Å –æ–±–ª–∞—Å—Ç—è–º–∏ —Å–æ–±—ã—Ç–∏–π

### ‚ö° –§–∞–∑–∞ 2: Command Pattern –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π —á–µ—Ä–µ–∑ Command Pattern

#### 2.1 –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/trigger_actions.py` - TriggerAction, SpawnEnemiesAction
- [ ] –°–æ–∑–¥–∞—Ç—å OpenPortalAction, GiveLootAction, ActivateNPCAction
- [ ] –°–æ–∑–¥–∞—Ç—å `test_trigger_actions.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤
- [ ] –í—Å–µ –±–∞–∑–æ–≤—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 2.2 –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ–∑–¥–∞—Ç—å CompositeTriggerAction –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å SequentialTriggerAction –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_composite_actions.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–∞–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- [ ] –°–ª–æ–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ

#### 2.3 –£—Å–ª–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ–∑–¥–∞—Ç—å ConditionalTriggerAction —Å —É—Å–ª–æ–≤–∏—è–º–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π: —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä–æ–∫–∞, –ø—Ä–µ–¥–º–µ—Ç—ã, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∫–≤–µ—Å—Ç—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `test_conditional_actions.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Å–ª–æ–≤–Ω—ã—Ö –∫–æ–º–∞–Ω–¥
- [ ] –°–æ–±—ã—Ç–∏—è –∞–∫—Ç–∏–≤–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏–π

### üè≠ –§–∞–∑–∞ 3: Factory Pattern –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Event Boxes
**–¶–µ–ª—å**: –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ Event Boxes —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫–∏

#### 3.1 –ë–∞–∑–æ–≤–∞—è —Ñ–∞–±—Ä–∏–∫–∞ Event Boxes
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/event_box_factory.py` - EventBoxFactory, StandardEventBoxFactory
- [ ] –°–æ–∑–¥–∞–Ω–∏–µ Event Boxes –ø–æ —Ç–∏–ø—É –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_box_factory.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∞–±—Ä–∏–∫–∏
- [ ] –§–∞–±—Ä–∏–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–æ–∑–¥–∞–µ—Ç –≤—Å–µ —Ç–∏–ø—ã Event Boxes

#### 3.2 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å WorldSpecificEventBoxFactory –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏—Ä–∞
- [ ] –°–æ–∑–¥–∞—Ç—å QuestEventBoxFactory –¥–ª—è –∫–≤–µ—Å—Ç–æ–≤—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_specialized_factories.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ñ–∞–±—Ä–∏–∫
- [ ] –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ —Å–æ–∑–¥–∞—é—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

#### 3.3 –ó–∞–≥—Ä—É–∑—á–∏–∫ —Å–æ–±—ã—Ç–∏–π –∏–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `src/world/event_loader.py` - –∑–∞–≥—Ä—É–∑–∫–∞ Event Boxes –∏–∑ JSON/–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Å–æ–∑–¥–∞–Ω–∏–µ —á–µ—Ä–µ–∑ —Ñ–∞–±—Ä–∏–∫–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_loader.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞
- [ ] –°–æ–±—ã—Ç–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### üåç –§–∞–∑–∞ 4: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
**–¶–µ–ª—å**: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ Event Box

#### 4.1 –ü–æ—Ä—Ç–∞–ª—ã –∏ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏—è
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PortalTriggerAction –¥–ª—è —Ç–µ–ª–µ–ø–æ—Ä—Ç–∞—Ü–∏–∏ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –º–∏—Ä–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_portal_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Ä—Ç–∞–ª–æ–≤
- [ ] –ü–æ—Ä—Ç–∞–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ç–µ–ª–µ–ø–æ—Ä—Ç–∏—Ä—É—é—Ç –∏–≥—Ä–æ–∫–∞ –º–µ–∂–¥—É –º–∏—Ä–∞–º–∏

#### 4.2 –°–ø–∞—É–Ω –≤—Ä–∞–≥–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SpawnTriggerAction —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ–∞–±—Ä–∏–∫–æ–π –≤—Ä–∞–≥–æ–≤ –∏ —Å–∏—Å—Ç–µ–º–æ–π –ò–ò
- [ ] –°–æ–∑–¥–∞—Ç—å `test_enemy_spawn_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∞—É–Ω–∞ –≤—Ä–∞–≥–æ–≤
- [ ] –í—Ä–∞–≥–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤

#### 4.3 –°–∏—Å—Ç–µ–º–∞ –ª—É—Ç–∞ –∏ —Å—É–Ω–¥—É–∫–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å LootTriggerAction —Å —Ç–∞–±–ª–∏—Ü–∞–º–∏ –ª—É—Ç–∞
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –∏ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
- [ ] –°–æ–∑–¥–∞—Ç—å `test_loot_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—É—Ç–∞
- [ ] –õ—É—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å

### üé≠ –§–∞–∑–∞ 5: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
**–¶–µ–ª—å**: –°–ª–æ–∂–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å

#### 5.1 –ê–∫—Ç–∏–≤–∞—Ü–∏—è NPC –∏ –º–∞–≥–∞–∑–∏–Ω–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å NPCActivationAction –¥–ª—è –ø–æ—è–≤–ª–µ–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—Ü–µ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π NPC –∏ –∫–≤–µ—Å—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_npc_activation.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ NPC
- [ ] NPC –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–æ—è–≤–ª—è—é—Ç—Å—è –∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç —É—Å–ª—É–≥–∏

#### 5.2 –í—Ö–æ–¥—ã –≤ —Ç–æ–Ω–Ω–µ–ª–∏ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Issue #02)
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å TunnelEntranceAction –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –Ω–∞ Z-—É—Ä–æ–≤–Ω–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- [ ] –°–æ–∑–¥–∞—Ç—å `test_tunnel_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ö–æ–¥–æ–≤ –≤ —Ç–æ–Ω–Ω–µ–ª–∏
- [ ] –ü–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —á–µ—Ä–µ–∑ Event Boxes

#### 5.3 –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–∏
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å PuzzleTriggerAction –¥–ª—è –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª–µ–π –∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_puzzle_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–æ–ª–æ–≤–æ–ª–æ–º–æ–∫
- [ ] –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ —Ç—Ä–µ–±—É—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π

### üé¨ –§–∞–∑–∞ 6: –°—é–∂–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∏ –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è
**–¶–µ–ª—å**: –°–æ–±—ã—Ç–∏—è –¥–ª—è –Ω–∞—Ä—Ä–∞—Ç–∏–≤–∞ –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –º–∏—Ä–∞

#### 6.1 –°—é–∂–µ—Ç–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å StoryTriggerAction –¥–ª—è –∫–∞—Å—Ç—Å—Ü–µ–Ω –∏ –¥–∏–∞–ª–æ–≥–æ–≤
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –¥–∏–∞–ª–æ–≥–æ–≤ –∏ –∫–≤–µ—Å—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_story_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—é–∂–µ—Ç–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π
- [ ] –°—é–∂–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–º–µ–Ω—è—é—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã

#### 6.2 –°–∏—Å—Ç–µ–º–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ —Å–æ–±—ã—Ç–∏—è—Ö
- [ ] –°–æ–∑–¥–∞—Ç—å `src/ui/event_notifications.py` - UI —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ–±—ã—Ç–∏—è—Ö
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ –∏ –∑–≤—É–∫–æ–≤—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –∞–∫—Ç–∏–≤–∞—Ü–∏–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_notifications.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- [ ] –ò–≥—Ä–æ–∫ –ø–æ–ª—É—á–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π

#### 6.3 –†–µ–¥–∞–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
- [ ] –°–æ–∑–¥–∞—Ç—å –±–∞–∑–æ–≤—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è Event Boxes
- [ ] –°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∏—Ä–∞
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_editor_utils.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–∏–ª–∏—Ç —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
- [ ] –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –ª–µ–≥–∫–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è

### üîß –§–∞–∑–∞ 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–¶–µ–ª—å**: –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 7.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ –≤—Å–µ–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- [ ] –°–≤—è–∑–∞—Ç—å Event Boxes —Å —Å–∏—Å—Ç–µ–º–æ–π —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–π –¥–ª—è —Å–æ—Å—Ç–æ—è–Ω–∏—è
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å–∏—Å—Ç–µ–º–æ–π –º–∏—Ä–æ–≤ –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_system_integration.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
- [ ] –í—Å–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω—ã

#### 7.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∫–æ–ª–ª–∏–∑–∏–π —Å Event Boxes
- [ ] –°–∏—Å—Ç–µ–º–∞ –∫—É–ª–¥–∞—É–Ω–æ–≤ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_event_performance.py` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–æ–±—ã—Ç–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–º–∏ Event Boxes

#### 7.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∏—Å—Ç–µ–º—ã —Å–æ–±—ã—Ç–∏–π –≤ `config.ini`
- [ ] –°–æ–∑–¥–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é Event Boxes –≤ `CLAUDE.md`
- [ ] –°–æ–∑–¥–∞—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å–æ–±—ã—Ç–∏–π
- [ ] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã

---

## üå≥ –î–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ–¥–∑–∞–¥–∞—á

```
–§–∞–∑–∞ 1: –ë–∞–∑–æ–≤–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Event Boxes
‚îú‚îÄ‚îÄ 1.1 ECS –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã Event Boxes
‚îú‚îÄ‚îÄ 1.2 Observer Pattern –¥–ª—è —Å–æ–±—ã—Ç–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1)
‚îî‚îÄ‚îÄ 1.3 –ë–∞–∑–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ Event Boxes (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1, 1.2)

–§–∞–∑–∞ 2: Command Pattern –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π
‚îú‚îÄ‚îÄ 2.1 –ë–∞–∑–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.2)
‚îú‚îÄ‚îÄ 2.2 –°–æ—Å—Ç–∞–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1)
‚îî‚îÄ‚îÄ 2.3 –£—Å–ª–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.2)

–§–∞–∑–∞ 3: Factory Pattern –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è
‚îú‚îÄ‚îÄ 3.1 –ë–∞–∑–æ–≤–∞—è —Ñ–∞–±—Ä–∏–∫–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1, 2.1)
‚îú‚îÄ‚îÄ 3.2 –°–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–±—Ä–∏–∫–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.1)
‚îî‚îÄ‚îÄ 3.3 –ó–∞–≥—Ä—É–∑—á–∏–∫ —Å–æ–±—ã—Ç–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.2)

–§–∞–∑–∞ 4: –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Ç–∏–ø—ã —Å–æ–±—ã—Ç–∏–π
‚îú‚îÄ‚îÄ 4.1 –ü–æ—Ä—Ç–∞–ª—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1, Issue #01)
‚îú‚îÄ‚îÄ 4.2 –°–ø–∞—É–Ω –≤—Ä–∞–≥–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1, Issue #05)
‚îî‚îÄ‚îÄ 4.3 –°–∏—Å—Ç–µ–º–∞ –ª—É—Ç–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1, Issue #08)

–§–∞–∑–∞ 5: –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è
‚îú‚îÄ‚îÄ 5.1 –ê–∫—Ç–∏–≤–∞—Ü–∏—è NPC (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.3, Issue #09)
‚îú‚îÄ‚îÄ 5.2 –í—Ö–æ–¥—ã –≤ —Ç–æ–Ω–Ω–µ–ª–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1, Issue #02)
‚îî‚îÄ‚îÄ 5.3 –ì–æ–ª–æ–≤–æ–ª–æ–º–∫–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.2)

–§–∞–∑–∞ 6: –°—é–∂–µ—Ç–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è (–º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ –§–∞–∑—ã 2)
‚îú‚îÄ‚îÄ 6.1 –°—é–∂–µ—Ç–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.3, Issue #09)
‚îú‚îÄ‚îÄ 6.2 –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.3)
‚îî‚îÄ‚îÄ 6.3 –†–µ–¥–∞–∫—Ç–æ—Ä —Å–æ–±—ã—Ç–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.3)

–§–∞–∑–∞ 7: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ 7.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
‚îú‚îÄ‚îÄ 7.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 7.1)
‚îî‚îÄ‚îÄ 7.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å**: 1.1 ‚Üí 1.2 ‚Üí 1.3 ‚Üí 2.1 ‚Üí 3.1 ‚Üí 4.1 ‚Üí 7.1 ‚Üí 7.2 ‚Üí 7.3

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**: 
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞ —Å–æ–±—ã—Ç–∏—è –∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –¥—Ä—É–≥–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏—è—Ö
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 90% –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å–æ–±—ã—Ç–∏–π–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã