# Issue #02: –°–∏—Å—Ç–µ–º–∞ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏ —Ç–æ–Ω–Ω–µ–ª–µ–π

## –û–ø–∏—Å–∞–Ω–∏–µ
–†–µ–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –≤—ã—Å–æ—Ç—ã (Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞) –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω–æ–≥–æ –ª–∞–Ω–¥—à–∞—Ñ—Ç–∞ —Å —Ç–æ–Ω–Ω–µ–ª—è–º–∏, –º–æ—Å—Ç–∞–º–∏ –∏ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏.

## –¶–µ–ª—å
–î–æ–±–∞–≤–∏—Ç—å —Ç—Ä–µ—Ç—å–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ –≤ 2D –∏–≥—Ä—É –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω–æ–π –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –º–∏—Ä–∞ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –¥–≤–∏–∂–µ–Ω–∏—è –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Ä–æ–≤–Ω—è—Ö –≤—ã—Å–æ—Ç—ã.

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–∞ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
- [ ] –í–≤–µ–¥–µ–Ω–∏–µ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∏–≥—Ä–æ–≤—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- [ ] –¢—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã—Ö Z-—É—Ä–æ–≤–Ω—è:
  - [ ] Z = -1: –ø–æ–¥–∑–µ–º–Ω—ã–µ —Ç–æ–Ω–Ω–µ–ª–∏, –ø–æ–¥–≤–∞–ª—ã
  - [ ] Z = 0: –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å –∏–≥—Ä—ã (—Ç–µ–∫—É—â–∏–π)
  - [ ] Z = +1: –º–æ—Å—Ç—ã, –≤–µ—Ä—Ö—É—à–∫–∏ –¥–µ—Ä–µ–≤—å–µ–≤, –∫—Ä—ã—à–∏
- [ ] –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- [ ] –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≥–ª—É–±–∏–Ω—ã –∏ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è

### –°–∏—Å—Ç–µ–º–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] **–í—Ö–æ–¥—ã –≤ —Ç–æ–Ω–Ω–µ–ª–∏**: —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ç–∞–π–ª—ã-—Ç—Ä–∏–≥–≥–µ—Ä—ã
- [ ] **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π**:
  - [ ] –î–ª–∏–Ω–∞: –æ—Ç 2 –¥–æ 5 –∫–ª–µ—Ç–æ–∫
  - [ ] –®–∏—Ä–∏–Ω–∞: 2 –∫–ª–µ—Ç–∫–∏ (—É–∑–∫–∏–π –ø—Ä–æ—Ö–æ–¥)
  - [ ] –°—Ç–µ–Ω—ã: –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–≤–∏–∂–µ–Ω–∏—è –ø–æ –±–æ–∫–∞–º
- [ ] **–í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ**: —Ç—Ä–∞–≤—è–Ω—ã–µ —Ç–∞–π–ª—ã —Å–∫—Ä—ã–≤–∞—é—Ç –∏–≥—Ä–æ–∫–∞ –≤ —Ç–æ–Ω–Ω–µ–ª–µ
- [ ] **–í—ã—Ö–æ–¥—ã –∏–∑ —Ç–æ–Ω–Ω–µ–ª–µ–π**: –≤–æ–∑–≤—Ä–∞—Ç –Ω–∞ –±–∞–∑–æ–≤—ã–π —É—Ä–æ–≤–µ–Ω—å

### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞ –≤—ã—Å–æ—Ç—ã
- [ ] **–ú–æ—Å—Ç—ã**: –¥–≤–∏–∂–µ–Ω–∏–µ –Ω–∞–¥ –∏ –ø–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏
- [ ] **–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∑–¥–∞–Ω–∏—è**: –ª–µ—Å—Ç–Ω–∏—Ü—ã –º–µ–∂–¥—É —ç—Ç–∞–∂–∞–º–∏
- [ ] **–í–æ–¥–æ–ø–∞–¥—ã –∏ –æ–±—Ä—ã–≤—ã**: –≤–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –≥–ª—É–±–∏–Ω—ã
- [ ] **–õ–µ—Ç–∞—é—â–∏–µ –æ–±—ä–µ–∫—Ç—ã**: —Å—É—â–µ—Å—Ç–≤–∞ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö Z-—É—Ä–æ–≤–Ω—è—Ö

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã

#### ECS Components –¥–ª—è Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
```python
# src/core/ecs/spatial_components.py
class PositionComponent(Component):
    """–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ–∑–∏—Ü–∏–∏ —Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π"""
    def __init__(self, x: float, y: float, z: int = 0):
        self.x = x
        self.y = y
        self.z = z  # -1: –ø–æ–¥–∑–µ–º–Ω—ã–π, 0: –±–∞–∑–æ–≤—ã–π, +1: –Ω–∞–¥–∑–µ–º–Ω—ã–π
        self.previous_z = z

class ZLevelComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Z-—É—Ä–æ–≤–Ω—è–º–∏"""
    def __init__(self, current_level: int = 0):
        self.current_level = current_level
        self.can_change_levels = True
        self.transition_cooldown = 0

class TunnelComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–æ–Ω–Ω–µ–ª—è"""
    def __init__(self, entrance_pos: tuple, exit_pos: tuple, length: int):
        self.entrance_pos = entrance_pos
        self.exit_pos = exit_pos
        self.length = length
        self.width = 2  # –∫–ª–µ—Ç–∫–∏
        self.tunnel_path = self._generate_path()

class RenderLayerComponent(Component):
    """–ö–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º"""
    def __init__(self, layer: int, alpha: int = 255):
        self.layer = layer
        self.alpha = alpha  # –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏—è
        self.visible = True
```

#### Strategy Pattern –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–æ–µ–≤
```python
# src/rendering/layer_strategies.py
class LayerRenderStrategy(ABC):
    """–°—Ç—Ä–∞—Ç–µ–≥–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö Z-—É—Ä–æ–≤–Ω–µ–π"""
    
    @abstractmethod
    def render(self, entity: Entity, screen: Surface, camera_offset: tuple):
        pass

class UndergroundRenderStrategy(LayerRenderStrategy):
    """–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–æ–¥–∑–µ–º–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è (Z = -1)"""
    def render(self, entity: Entity, screen: Surface, camera_offset: tuple):
        # –ó–∞—Ç–µ–º–Ω–µ–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è –ø–æ–¥–∑–µ–º–µ–ª–∏–π
        render_comp = entity.get_component(RenderComponent)
        pos_comp = entity.get_component(PositionComponent)
        
        if pos_comp.z == -1:
            # –†–µ–Ω–¥–µ—Ä–∏–º —Å –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ–º
            darkened_surface = self._apply_darkness(render_comp.sprite)
            screen.blit(darkened_surface, (pos_comp.x - camera_offset[0], 
                                         pos_comp.y - camera_offset[1]))

class OverlayRenderStrategy(LayerRenderStrategy):
    """–†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (—Ç—Ä–∞–≤–∞ –Ω–∞–¥ —Ç–æ–Ω–Ω–µ–ª—è–º–∏)"""
    def render(self, entity: Entity, screen: Surface, camera_offset: tuple):
        # –ü–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –¥–ª—è –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π
        render_comp = entity.get_component(RenderComponent)
        layer_comp = entity.get_component(RenderLayerComponent)
        
        if layer_comp.alpha < 255:
            overlay_surface = render_comp.sprite.copy()
            overlay_surface.set_alpha(layer_comp.alpha)
            screen.blit(overlay_surface, position)

class LayerRenderer(System):
    """–°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º"""
    def __init__(self):
        self.strategies = {
            -1: UndergroundRenderStrategy(),
            0: BaseRenderStrategy(),
            1: ElevatedRenderStrategy()
        }
    
    def update(self, dt: float, entities: List[Entity]):
        # –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ Z-—É—Ä–æ–≤–Ω—é –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
        sorted_entities = sorted(entities, 
                               key=lambda e: e.get_component(PositionComponent).z)
        
        for entity in sorted_entities:
            pos_comp = entity.get_component(PositionComponent)
            strategy = self.strategies.get(pos_comp.z)
            if strategy:
                strategy.render(entity, self.screen, self.camera_offset)
```

#### State Pattern –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏
```python
# src/world/z_transition_states.py
class ZTransitionState(ABC):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞ –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏"""
    
    @abstractmethod
    def handle_transition(self, entity: Entity, target_z: int) -> bool:
        pass

class EnteringTunnelState(ZTransitionState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Ö–æ–¥–∞ –≤ —Ç–æ–Ω–Ω–µ–ª—å"""
    def handle_transition(self, entity: Entity, target_z: int) -> bool:
        pos_comp = entity.get_component(PositionComponent)
        z_comp = entity.get_component(ZLevelComponent)
        
        if target_z == -1 and pos_comp.z == 0:
            # –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è
            self._play_enter_animation(entity)
            pos_comp.z = -1
            z_comp.current_level = -1
            return True
        return False

class ExitingTunnelState(ZTransitionState):
    """–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–æ–Ω–Ω–µ–ª—è"""
    def handle_transition(self, entity: Entity, target_z: int) -> bool:
        pos_comp = entity.get_component(PositionComponent)
        
        if target_z == 0 and pos_comp.z == -1:
            # –ê–Ω–∏–º–∞—Ü–∏—è –≤—Å–ø–ª—ã—Ç–∏—è
            self._play_exit_animation(entity)
            pos_comp.z = 0
            return True
        return False

class ZTransitionSystem(System):
    """–°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏"""
    def __init__(self):
        self.states = {
            'entering_tunnel': EnteringTunnelState(),
            'exiting_tunnel': ExitingTunnelState(),
            'climbing_bridge': ClimbingBridgeState()
        }
```

#### Observer Pattern –¥–ª—è Z-—Å–æ–±—ã—Ç–∏–π
```python
# src/events/z_level_events.py
class ZLevelChangedEvent(GameEvent):
    """–°–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è Z-—É—Ä–æ–≤–Ω—è"""
    def __init__(self, entity: Entity, old_z: int, new_z: int):
        super().__init__("z_level_changed")
        self.entity = entity
        self.old_z = old_z
        self.new_z = new_z

class TunnelEnteredEvent(GameEvent):
    """–°–æ–±—ã—Ç–∏–µ –≤—Ö–æ–¥–∞ –≤ —Ç–æ–Ω–Ω–µ–ª—å"""
    def __init__(self, entity: Entity, tunnel: Entity):
        super().__init__("tunnel_entered")
        self.entity = entity
        self.tunnel = tunnel

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Å–∏—Å—Ç–µ–º–∞—Ö
class CollisionSystem(System):
    def __init__(self, event_system: EventSystem):
        self.event_system = event_system
    
    def check_z_collision(self, entity1: Entity, entity2: Entity) -> bool:
        pos1 = entity1.get_component(PositionComponent)
        pos2 = entity2.get_component(PositionComponent)
        
        # –ö–æ–ª–ª–∏–∑–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞ –æ–¥–Ω–æ–º Z-—É—Ä–æ–≤–Ω–µ
        return pos1.z == pos2.z and self._check_2d_collision(entity1, entity2)
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞

#### –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫
```
src/
‚îú‚îÄ‚îÄ core/ecs/
‚îÇ   ‚îú‚îÄ‚îÄ spatial_components.py     # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∑–∏—Ü–∏–∏ –∏ Z-—É—Ä–æ–≤–Ω–µ–π
‚îÇ   ‚îî‚îÄ‚îÄ render_components.py      # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
‚îú‚îÄ‚îÄ rendering/
‚îÇ   ‚îú‚îÄ‚îÄ layer_strategies.py       # –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–æ–µ–≤
‚îÇ   ‚îú‚îÄ‚îÄ layer_renderer.py         # –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º
‚îÇ   ‚îî‚îÄ‚îÄ z_effects.py              # –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è Z-–ø–µ—Ä–µ—Ö–æ–¥–æ–≤
‚îú‚îÄ‚îÄ world/
‚îÇ   ‚îú‚îÄ‚îÄ z_level_manager.py        # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Z-—É—Ä–æ–≤–Ω—è–º–∏ (ECS System)
‚îÇ   ‚îú‚îÄ‚îÄ tunnel_system.py          # –°–∏—Å—Ç–µ–º–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π (ECS System)
‚îÇ   ‚îî‚îÄ‚îÄ z_transition_states.py    # –°–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏
‚îî‚îÄ‚îÄ events/
    ‚îî‚îÄ‚îÄ z_level_events.py         # –°–æ–±—ã—Ç–∏—è Z-—É—Ä–æ–≤–Ω–µ–π
```

### –§–∞–π–ª—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–∏–∑–º–µ–Ω–µ–Ω–∏—è
- `src/core/ecs/spatial_components.py` - –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–∑–∏—Ü–∏–∏ —Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π
- `src/rendering/layer_strategies.py` - —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–æ–µ–≤
- `src/rendering/layer_renderer.py` - —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º (ECS System)
- `src/world/z_level_manager.py` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Z-—É—Ä–æ–≤–Ω—è–º–∏ (ECS System)
- `src/world/tunnel_system.py` - —Å–∏—Å—Ç–µ–º–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π (ECS System)
- `src/world/z_transition_states.py` - —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- `src/events/z_level_events.py` - —Å–æ–±—ã—Ç–∏—è Z-—É—Ä–æ–≤–Ω–µ–π
- `src/entities/player.py` - –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ Z-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–≥—Ä–æ–∫—É

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ —Å–∏—Å—Ç–µ–º–∞–º–∏
- **ECS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –í—Å–µ –æ–±—ä–µ–∫—Ç—ã –ø–æ–ª—É—á–∞—é—Ç PositionComponent —Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π
- **Strategy Pattern**: –†–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ Z-—É—Ä–æ–≤–Ω—è
- **State Pattern**: –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º–µ–∂–¥—É —É—Ä–æ–≤–Ω—è–º–∏ —á–µ—Ä–µ–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **Observer Pattern**: –°–æ–±—ã—Ç–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º –ø—Ä–∏ —Å–º–µ–Ω–µ Z-—É—Ä–æ–≤–Ω—è

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
```ini
[Z_LEVELS]
min_z = -1
max_z = 1
tunnel_max_length = 5
tunnel_width = 2
overlay_alpha = 128
```

## –ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã
- [ ] –ö–∞—Ä—Ç–∞ –æ–∫—Ä—É–∂–µ–Ω–∞ –≥–æ—Ä–∞–º–∏ (–µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≥—Ä–∞–Ω–∏—Ü—ã)
- [ ] –í–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–≤—è–Ω—ã–µ –ø–æ–ª—è (–±–∞–∑–æ–≤—ã–π Z-—É—Ä–æ–≤–µ–Ω—å 0)
- [ ] **3 —Ç–æ–Ω–Ω–µ–ª—è —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã**:
  - [ ] –ö–æ—Ä–æ—Ç–∫–∏–π (2 –∫–ª–µ—Ç–∫–∏): –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–æ—Ö–æ–¥
  - [ ] –°—Ä–µ–¥–Ω–∏–π (3-4 –∫–ª–µ—Ç–∫–∏): —Å –ø–æ–≤–æ—Ä–æ—Ç–æ–º
  - [ ] –î–ª–∏–Ω–Ω—ã–π (5 –∫–ª–µ—Ç–æ–∫): –ø—Ä—è–º–æ–π, —Å —Å–æ–∫—Ä–æ–≤–∏—â–µ–º –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ

## –ö—Ä–∏—Ç–µ—Ä–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏
- [ ] –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –≤—Ö–æ–¥–∏—Ç—å –∏ –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] –í–∏–∑—É–∞–ª—å–Ω–æ–µ –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- [ ] –ö–æ–ª–ª–∏–∑–∏–∏ —É—á–∏—Ç—ã–≤–∞—é—Ç Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É
- [ ] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ª–æ–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤
- [ ] –°–∏—Å—Ç–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç Z-–ø–æ–∑–∏—Ü–∏—é –∏–≥—Ä–æ–∫–∞
- [ ] –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–µ—Ç—Å—è —Å—Ç–∞–±–∏–ª—å–Ω–æ–π (60 FPS)

## –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç
**–í—ã—Å–æ–∫–∏–π** - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–ª–æ–∂–Ω–æ–π –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –º–∏—Ä–∞

## –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- Issue #01 (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∏—Ä—ã) - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –º–∏—Ä–µ-–ø–µ—â–µ—Ä–µ
- –¢–µ–∫—É—â–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π

## –†–∏—Å–∫–∏ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏
- –°–ª–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤
- –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é
- –ù–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

## –ü—Ä–∏–º–µ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
3-4 –Ω–µ–¥–µ–ª–∏

## –°–≤—è–∑–∞–Ω–Ω—ã–µ issues
- #01 (–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∏—Ä—ã)
- #07 (Event boxes –∏ —Ç—Ä–∏–≥–≥–µ—Ä—ã)
- #08 (–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –±–æ–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞)

---

## –ü–æ–¥–∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### üèóÔ∏è –§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
**–¶–µ–ª—å**: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤–æ –≤—Å–µ –∏–≥—Ä–æ–≤—ã–µ –æ–±—ä–µ–∫—Ç—ã

#### 1.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –†–∞—Å—à–∏—Ä–∏—Ç—å `src/core/ecs/spatial_components.py` - –¥–æ–±–∞–≤–∏—Ç—å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—É –≤ PositionComponent
- [ ] –°–æ–∑–¥–∞—Ç—å ZLevelComponent, TunnelComponent, RenderLayerComponent  
- [ ] –°–æ–∑–¥–∞—Ç—å `test_spatial_components.py` - unit —Ç–µ—Å—Ç—ã –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π
- [ ] –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —Å –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º–æ–π –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç

#### 1.2 –°–æ–±—ã—Ç–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è Z-—É—Ä–æ–≤–Ω–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å `src/events/z_level_events.py` - ZLevelChangedEvent, TunnelEnteredEvent
- [ ] –°–æ–∑–¥–∞—Ç—å `test_z_level_events.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π Z-—É—Ä–æ–≤–Ω–µ–π
- [ ] –°–æ–±—ã—Ç–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤—Å–µ–º–∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏

### üé® –§–∞–∑–∞ 2: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º
**–¶–µ–ª—å**: –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ—Ç—Ä–∏—Å–æ–≤–∫–∞ –æ–±—ä–µ–∫—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö Z-—É—Ä–æ–≤–Ω—è—Ö

#### 2.1 Strategy Pattern –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ —Å–ª–æ–µ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `src/rendering/layer_strategies.py` - LayerRenderStrategy, UndergroundRenderStrategy, OverlayRenderStrategy
- [ ] –°–æ–∑–¥–∞—Ç—å `src/rendering/layer_renderer.py` - LayerRenderer —Å–∏—Å—Ç–µ–º–∞ (ECS)
- [ ] –°–æ–∑–¥–∞—Ç—å `test_layer_rendering.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- [ ] –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–µ –ø—Ä–∏ –æ—Ç—Ä–∏—Å–æ–≤–∫–µ

#### 2.2 –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã –¥–ª—è Z-–ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `src/rendering/z_effects.py` - –∞–Ω–∏–º–∞—Ü–∏–∏ –≤—Ö–æ–¥–∞/–≤—ã—Ö–æ–¥–∞ –∏–∑ —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] –°–æ–∑–¥–∞—Ç—å `test_z_effects.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- [ ] –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏ —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π

### üåÄ –§–∞–∑–∞ 3: –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏
**–¶–µ–ª—å**: State Pattern –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏

#### 3.1 State Pattern –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `src/world/z_transition_states.py` - ZTransitionState, EnteringTunnelState, ExitingTunnelState  
- [ ] –°–æ–∑–¥–∞—Ç—å ZTransitionSystem (ECS System)
- [ ] –°–æ–∑–¥–∞—Ç—å `test_z_transitions.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- [ ] –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏ –±–µ–∑ –≥–ª–∏—Ç—á–µ–π

#### 3.2 –°–∏—Å—Ç–µ–º–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π –∫–∞–∫ ECS System
- [ ] –°–æ–∑–¥–∞—Ç—å `src/world/tunnel_system.py` - TunnelSystem –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ç–æ–Ω–Ω–µ–ª—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `src/world/z_level_manager.py` - ZLevelManager (ECS System)
- [ ] –°–æ–∑–¥–∞—Ç—å `test_tunnel_system.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] –ò–≥—Ä–æ–∫ –º–æ–∂–µ—Ç –≤—Ö–æ–¥–∏—Ç—å –∏ –≤—ã—Ö–æ–¥–∏—Ç—å –∏–∑ —Ç–æ–Ω–Ω–µ–ª–µ–π –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîß –§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–æ–ª–ª–∏–∑–∏—è–º–∏ –∏ –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
**–¶–µ–ª—å**: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å–∏—Å—Ç–µ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–æ–π

#### 4.1 –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã
- [ ] –û–±–Ω–æ–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–ª–ª–∏–∑–∏–π –¥–ª—è —É—á–µ—Ç–∞ Z-—É—Ä–æ–≤–Ω—è
- [ ] –°–æ–∑–¥–∞—Ç—å `test_z_collision.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–ª–ª–∏–∑–∏–π –Ω–∞ —Ä–∞–∑–Ω—ã—Ö Z-—É—Ä–æ–≤–Ω—è—Ö  
- [ ] –ö–æ–ª–ª–∏–∑–∏–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ –Ω–∞ –æ–¥–Ω–æ–º Z-—É—Ä–æ–≤–Ω–µ

#### 4.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–∫–æ–º
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `src/entities/player.py` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ Z-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- [ ] –°–æ–∑–¥–∞—Ç—å `test_player_z_movement.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤–∏–∂–µ–Ω–∏—è –∏–≥—Ä–æ–∫–∞ –ø–æ Z-—É—Ä–æ–≤–Ω—è–º
- [ ] –ò–≥—Ä–æ–∫ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–º–µ—â–∞–µ—Ç—Å—è –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏

### üåç –§–∞–∑–∞ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã —Å —Ç–æ–Ω–Ω–µ–ª—è–º–∏
**–¶–µ–ª—å**: –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Z-—Å–∏—Å—Ç–µ–º—ã

#### 5.1 –°–æ–∑–¥–∞–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `data/worlds/cave_world_with_tunnels.txt` - –∫–∞—Ä—Ç–∞ —Å –≥–æ—Ä–∞–º–∏, —Ç—Ä–∞–≤–æ–π, –≤—Ö–æ–¥–∞–º–∏ –≤ —Ç–æ–Ω–Ω–µ–ª–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Ç–æ–Ω–Ω–µ–ª–µ–π –≤ `config.ini`
- [ ] –°–æ–∑–¥–∞—Ç—å `test_cave_tunnels.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] 3 —Ç–æ–Ω–Ω–µ–ª—è —Ä–∞–∑–Ω–æ–π –¥–ª–∏–Ω—ã (2, 3-4, 5 –∫–ª–µ—Ç–æ–∫) —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

#### 5.2 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
- [ ] –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ —Ç—Ä–∞–≤—è–Ω—ã–µ —Ç–∞–π–ª—ã –Ω–∞–¥ —Ç–æ–Ω–Ω–µ–ª—è–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å `test_overlay_effects.py` - —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∏–∑—É–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–∫—Ä—ã—Ç–∏–π
- [ ] –ò–≥—Ä–æ–∫ —á–∞—Å—Ç–∏—á–Ω–æ —Å–∫—Ä—ã—Ç —Ç—Ä–∞–≤–æ–π –ø—Ä–∏ –¥–≤–∏–∂–µ–Ω–∏–∏ –≤ —Ç–æ–Ω–Ω–µ–ª–µ

### üîß –§–∞–∑–∞ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
**–¶–µ–ª—å**: –§–∏–Ω–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã Z-—Å–∏—Å—Ç–µ–º—ã
- [ ] –°–æ–∑–¥–∞—Ç—å `tests/integration/test_z_coordinate_integration.py`
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≤—Ö–æ–¥ –≤ —Ç–æ–Ω–Ω–µ–ª—å ‚Üí –¥–≤–∏–∂–µ–Ω–∏–µ ‚Üí –≤—ã—Ö–æ–¥ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏
- [ ] –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

#### 6.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- [ ] –ü—Ä–æ—Ñ–∏–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º
- [ ] –°–æ–∑–¥–∞—Ç—å `test_z_performance.py` - —Ç–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ Z-—Å–∏—Å—Ç–µ–º—ã  
- [ ] –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ª–æ–µ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ –Ω–∞ 60 FPS

#### 6.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `config.ini` —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ Z-—É—Ä–æ–≤–Ω–µ–π –∏ —Ç–æ–Ω–Ω–µ–ª–µ–π
- [ ] –û–±–Ω–æ–≤–∏—Ç—å `CLAUDE.md` —Å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π Z-—Å–∏—Å—Ç–µ–º—ã
- [ ] –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≥–æ—Ç–æ–≤–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üå≥ –î–µ—Ä–µ–≤–æ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø–æ–¥–∑–∞–¥–∞—á

```
–§–∞–∑–∞ 1: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ Z-–∫–æ–æ—Ä–¥–∏–Ω–∞—Ç
‚îú‚îÄ‚îÄ 1.1 –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚îî‚îÄ‚îÄ 1.2 –°–æ–±—ã—Ç–∏–π–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1)

–§–∞–∑–∞ 2: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –ø–æ —Å–ª–æ—è–º  
‚îú‚îÄ‚îÄ 2.1 Strategy Pattern –¥–ª—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1)
‚îî‚îÄ‚îÄ 2.2 –í–∏–∑—É–∞–ª—å–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.1, 1.2)

–§–∞–∑–∞ 3: –°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É Z-—É—Ä–æ–≤–Ω—è–º–∏
‚îú‚îÄ‚îÄ 3.1 State Pattern –¥–ª—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1, 1.2)
‚îî‚îÄ‚îÄ 3.2 –°–∏—Å—Ç–µ–º–∞ —Ç–æ–Ω–Ω–µ–ª–µ–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.1, 2.1)

–§–∞–∑–∞ 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–æ–π
‚îú‚îÄ‚îÄ 4.1 –°–∏—Å—Ç–µ–º–∞ –∫–æ–ª–ª–∏–∑–∏–π (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 1.1, 3.2)
‚îî‚îÄ‚îÄ 4.2 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∏–≥—Ä–æ–∫–æ–º (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 4.1, 3.1)

–§–∞–∑–∞ 5: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã (–º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –ø–æ—Å–ª–µ –§–∞–∑—ã 3)
‚îú‚îÄ‚îÄ 5.1 –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–∏—Ä–∞-–ø–µ—â–µ—Ä—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 3.2, Issue #01)
‚îî‚îÄ‚îÄ 5.2 –ü–µ—Ä–µ–∫—Ä—ã–≤–∞—é—â–∏–µ —ç—Ñ—Ñ–µ–∫—Ç—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 2.2, 5.1)

–§–∞–∑–∞ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
‚îú‚îÄ‚îÄ 6.1 –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
‚îú‚îÄ‚îÄ 6.2 –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç 6.1)
‚îî‚îÄ‚îÄ 6.3 –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Å–µ—Ö –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Ñ–∞–∑)
```

**–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π –ø—É—Ç—å**: 1.1 ‚Üí 1.2 ‚Üí 2.1 ‚Üí 3.1 ‚Üí 3.2 ‚Üí 4.1 ‚Üí 4.2 ‚Üí 6.1 ‚Üí 6.2 ‚Üí 6.3

**–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é**: 
- Unit —Ç–µ—Å—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∏ —Å–∏—Å—Ç–µ–º—ã
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è Z-—Å–∏—Å—Ç–µ–º  
- –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ: 90% –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤