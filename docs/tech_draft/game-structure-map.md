# Игровая карта - дерево сущностей и возможностей

```
🎮 Zelda-like Game (2D)
├── 🌍 ИГРОВОЙ МИР
│   ├── 📐 Размеры
│   │   ├── Мир: 2000x2000 пикселей
│   │   ├── Сетка: 32x32 тайла
│   │   └── Безопасная зона: 100x100 (центр)
│   ├── 🏔️ Препятствия
│   │   ├── Количество: 150 коричневых блоков
│   │   ├── Размеры: 1x1 или 2x2 тайла
│   │   └── Коллизии: полные
│   └── 📹 Камера
│       ├── Следование за игроком
│       ├── Ограничения границ
│       └── Размер окна: 1024x768
│
├── 👤 ИГРОК (Player) [ПОЛНОСТЬЮ РЕАЛИЗОВАН]
│   ├── 🎯 Базовые характеристики
│   │   ├── Размер: 32x32 пикселя
│   │   ├── Скорость: 120 пикс/сек (модифицируется ландшафтом)
│   │   └── Позиция: загружается из карты (@)
│   ├── ❤️ Система здоровья
│   │   ├── Максимальное здоровье: 100 HP
│   │   ├── Текущее здоровье: отслеживается
│   │   ├── Урон от ландшафта: 1 HP (болота, пески)
│   │   ├── Кулдаун урона: 1000мс
│   │   └── Смерть при 0 HP
│   ├── 🕹️ Управление
│   │   ├── Движение: WASD/стрелки (8 направлений)
│   │   ├── Нормализация диагонали: √2
│   │   ├── Блокировка во время атаки
│   │   ├── F5: быстрое сохранение
│   │   └── F9: быстрая загрузка
│   ├── ⚔️ Боевая система
│   │   ├── Атака: пробел
│   │   ├── Направленная по взгляду (8 направлений)
│   │   ├── Дистанция: 40 пикселей
│   │   ├── Зона: 30x30 пикселей
│   │   ├── Длительность: 300мс
│   │   ├── Кулдаун: 100мс
│   │   └── Визуальные эффекты: красный цвет + желтая зона
│   └── 🎨 Визуализация
│       ├── Основной цвет: зеленый/красный
│       ├── Индикатор направления: белая точка
│       ├── Анимация атаки
│       └── Полоска здоровья в UI
│
├── 🤖 ВРАГИ (Enemy) [БАЗОВАЯ РЕАЛИЗАЦИЯ]
│   ├── 📊 Характеристики
│   │   ├── Размер: 32x32 пикселя
│   │   ├── Цвет: красный
│   │   └── Коллизии: включены
│   └── 🔮 Потенциал расширения
│       ├── → AI поведение
│       ├── → Типы врагов
│       ├── → Система здоровья
│       ├── → Атаки врагов
│       └── → Дроп предметов
│
├── 🧙 NPC [БАЗОВАЯ РЕАЛИЗАЦИЯ]
│   ├── 📊 Характеристики
│   │   ├── Размер: 32x32 пикселя
│   │   ├── Цвет: синий
│   │   └── Имя: настраиваемое
│   ├── 💬 Диалоговая система
│   │   ├── Массив реплик
│   │   ├── Индекс текущей реплики
│   │   └── Взаимодействие по нажатию
│   └── 🔮 Потенциал расширения
│       ├── → Квестовая система
│       ├── → Торговля
│       ├── → Различные типы NPC
│       └── → Анимации диалогов
│
├── 🎁 ПРЕДМЕТЫ (Item) [БАЗОВАЯ РЕАЛИЗАЦИЯ]
│   ├── 📊 Характеристики
│   │   ├── Размер: 24x24 пикселя
│   │   ├── Цвет: желтый
│   │   └── Тип: настраиваемый
│   ├── 🎒 Система сбора
│   │   ├── Флаг собранности
│   │   └── Скрытие после сбора
│   └── 🔮 Потенциал расширения
│       ├── → Инвентарь
│       ├── → Типы предметов (оружие, зелья, ключи)
│       ├── → Эффекты предметов
│       └── → Крафтинг
│
├── 🖥️ ИНТЕРФЕЙС [ПОЛНОСТЬЮ РЕАЛИЗОВАН]
│   ├── 🎮 Главное меню
│   │   ├── Динамические пункты меню
│   │   ├── Новая игра (всегда)
│   │   ├── Продолжить игру (если есть quicksave)
│   │   ├── Загрузить игру (если есть сохранения)
│   │   ├── Выход (всегда)
│   │   ├── Навигация: стрелки вверх/вниз
│   │   └── Стилизация: желтое выделение + стрелки
│   ├── ❤️ HUD здоровья
│   │   ├── Полоска здоровья в верхней части экрана
│   │   ├── Красно-зеленый градиент
│   │   ├── Отображение текущего/максимального HP
│   │   └── Обновление в реальном времени
│   ├── 💀 Экран Game Over
│   │   ├── Полупрозрачный черный фон
│   │   ├── Заголовок "💀 GAME OVER"
│   │   ├── Отображение игровой статистики
│   │   ├── Опции: возврат в меню / выход
│   │   └── Навигация: WASD/стрелки + Enter
│   ├── 🗺️ Мини-карта
│   │   ├── Размер: 150x150 пикселей
│   │   ├── Позиция: правый верхний угол
│   │   ├── Показывает: игрока (красная точка)
│   │   ├── Показывает: препятствия (серые точки)
│   │   └── Показывает: область камеры (желтая рамка)
│   └── 🐛 Отладочная информация (F1)
│       ├── Координаты игрока
│       ├── FPS
│       ├── Состояние игрока
│       └── Размер шрифта: 30
│
├── 🌍 СИСТЕМА ЛАНДШАФТА [ПОЛНОСТЬЮ РЕАЛИЗОВАНА]
│   ├── 🗺️ Типы ландшафта
│   │   ├── Пустота (.): проходимо, нейтрально
│   │   ├── Горы (#): непроходимо, блокирует движение
│   │   ├── Вода (~): непроходимо, блокирует движение
│   │   ├── Деревья (^): проходимо, декоративные
│   │   ├── Болота (M): проходимо, наносит 1 урон
│   │   ├── Пески (S): проходимо, наносит 1 урон + замедляет на 50%
│   │   └── Старт игрока (@): заменяется на пустоту
│   ├── 💥 Система урона
│   │   ├── Урон от болот: 1 HP
│   │   ├── Урон от песков: 1 HP
│   │   ├── Кулдаун урона: 1000мс
│   │   └── Интеграция со статистикой
│   ├── 🏃 Модификация скорости
│   │   ├── Пески: 50% от базовой скорости
│   │   └── Остальные: 100% скорости
│   └── 📁 Загрузка карт
│       ├── ASCII формат из файлов
│       ├── Поддержка комментариев (# )
│       └── Автоматическое определение стартовой позиции
│
├── 📊 СИСТЕМА СТАТИСТИКИ [ПОЛНОСТЬЮ РЕАЛИЗОВАНА]
│   ├── ⏱️ Время игры
│   │   ├── Отслеживание времени с начала игры
│   │   ├── Форматирование MM:SS
│   │   └── Автоматическое обновление
│   ├── ⚔️ Боевая статистика
│   │   ├── Убито врагов: 0 (готово к расширению)
│   │   ├── Нанесен урон: отслеживается
│   │   ├── Получен урон: отслеживается
│   │   └── Количество атак: отслеживается
│   ├── 🎒 Исследование
│   │   ├── Собрано предметов: 0 (готово к расширению)
│   │   ├── Пройденное расстояние: в метрах
│   │   └── Открытые области: готово к расширению
│   └── 💀 Здоровье и смерти
│       ├── Количество смертей: отслеживается
│       ├── Потеряно здоровья: отслеживается
│       └── Восстановлено здоровья: готово к расширению
│
├── 💾 СИСТЕМА СОХРАНЕНИЙ [ПОЛНОСТЬЮ РЕАЛИЗОВАНА]
│   ├── 📁 Файловая система
│   │   ├── Папка saves/ для всех сохранений
│   │   ├── JSON формат с версионированием
│   │   ├── UTF-8 кодировка
│   │   └── Красивое форматирование
│   ├── ⚡ Быстрые сохранения
│   │   ├── F5: сохранение в quicksave.json
│   │   ├── F9: загрузка из quicksave.json
│   │   ├── Уведомления об успехе/ошибке
│   │   └── Проверка существования файла
│   ├── 💽 Структура сохранения
│   │   ├── Версия сохранения (1.0)
│   │   ├── Временная метка ISO 8601
│   │   ├── Данные игрока (позиция, здоровье, направление)
│   │   ├── Данные мира (карта, открытые области)
│   │   ├── Инвентарь (готов к расширению)
│   │   └── Игровая статистика
│   └── 🛡️ Безопасность
│       ├── Проверка версии при загрузке
│       ├── Валидация данных
│       ├── Обработка ошибок
│       └── Восстановление после сбоев
│
├── ⚙️ КОНФИГУРАЦИЯ [РАСШИРЕНА]
│   ├── 📺 Дисплей
│   │   ├── Разрешение: 1024x768
│   │   └── FPS: 60
│   ├── 🌍 Мир
│   │   ├── Размер: 2000x2000
│   │   └── Размер тайла: 32
│   ├── 👤 Игрок
│   │   ├── Скорость: 120
│   │   ├── Размер: 32
│   │   ├── Максимальное здоровье: 100
│   │   └── Кулдаун урона: 1000мс
│   ├── ⚔️ Атака
│   │   ├── Длительность: 300мс
│   │   ├── Кулдаун: 100мс
│   │   └── Дистанция: 40
│   ├── 🎨 Цвета (RGB)
│   │   ├── Игрок: зеленый/красный
│   │   ├── Ландшафт: различные цвета
│   │   └── UI: белый/желтый/серый
│   └── 🌍 Генерация мира
│       ├── Количество препятствий: 150
│       └── Безопасная зона: 100
│
└── 🔮 ПОТЕНЦИАЛ РАСШИРЕНИЯ
    ├── 🎯 Игровая механика
    │   ├── → Система уровней
    │   ├── → Характеристики (сила, защита, магия)
    │   ├── → Система здоровья/маны
    │   ├── → Различные виды оружия
    │   └── → Магические способности
    ├── 🌍 Расширение мира
    │   ├── → Различные биомы
    │   ├── → Подземелья
    │   ├── → Секретные области
    │   ├── → Интерактивные объекты
    │   └── → Динамические события
    ├── 🤖 Расширение AI
    │   ├── → Патрулирование врагов
    │   ├── → Агрессивное поведение
    │   ├── → Групповые атаки
    │   └── → Боссы
    ├── 📜 Квестовая система
    │   ├── → Основные квесты
    │   ├── → Побочные задания
    │   ├── → Система наград
    │   └── → Дерево достижений
    ├── 🎵 Аудио система
    │   ├── → Фоновая музыка
    │   ├── → Звуковые эффекты
    │   ├── → Адаптивная музыка
    │   └── → Голосовые реплики NPC
    └── 💾 Система сохранений
        ├── → Сохранение прогресса
        ├── → Множественные слоты
        ├── → Автосохранение
        └── → Облачные сохранения
```

## Описание структуры

### ✅ Полностью реализованные системы
- **Игрок**: Движение, атака, здоровье, смерть, сохранение состояния
- **Система ландшафта**: 6 типов terrain с уроном и модификацией скорости
- **Интерфейс**: Главное меню, HUD здоровья, Game Over экран, мини-карта
- **Система сохранений**: JSON сохранения с версионированием, F5/F9
- **Система статистики**: Отслеживание всех игровых действий
- **Мир**: Генерация препятствий, коллизии, камера, загрузка карт
- **Конфигурация**: Централизованная система настроек

### 🔧 Базовые заготовки (готовы к расширению)
- **Враги**: Основная структура без AI
- **NPC**: Простая диалоговая система
- **Предметы**: Базовая система сбора

### 🏗️ Архитектурные принципы
- **Модульность**: Каждая система в отдельном модуле
- **Расширяемость**: Легкое добавление новых функций
- **Конфигурационность**: Все настройки в config.ini
- **Следование принципам**: ООП, SOLID, DRY
- **Производительность**: Delta time для плавного движения
- **Надежность**: Обработка ошибок и валидация данных

### 📈 Статус проекта
**Версия**: 0.2.1  
**Готовность**: ~70% базовой функциональности  
**Следующие этапы**: Система врагов, расширенный инвентарь, звук

Этот документ отражает текущее состояние игры и обновляется с каждым релизом.