# Игровая карта - дерево сущностей и возможностей (РАСШИРЕННАЯ ВЕРСИЯ)

```
🎮 Zelda-like Game (2D) - РАСШИРЕННАЯ ВЕРСИЯ
├── 🌍 ИГРОВОЙ МИР [ЗНАЧИТЕЛЬНО РАСШИРЕН]
│   ├── 📐 Размеры и структура
│   │   ├── Основной мир: 2000x2000 пикселей (стартовая локация)
│   │   ├── Множественные миры: различные размеры и тематики
│   │   ├── Сетка: 32x32 тайла (базовая)
│   │   ├── Z-координата: многослойный ландшафт [НОВОЕ]
│   │   └── Безопасная зона: 100x100 (центр стартового мира)
│   ├── 🌎 Система множественных миров [НОВОЕ]
│   │   ├── 🏠 Основной мир: стартовая локация, тутториал
│   │   ├── 🕳️ Мир-пещера: горы + травяные поля + тоннели
│   │   ├── 🔥 Подземный мир: лава, особые враги, высокая сложность
│   │   ├── ❄️ Ледяной мир: заснеженный ландшафт, скольжение
│   │   ├── 🌲 Лесной мир: густой лес, скрытые тропы
│   │   └── Настраиваемые миры: создание через конфиг файлы
│   ├── 🌀 Система порталов и телепортации [НОВОЕ]
│   │   ├── 🌀 Тайлы порталов: специальные тайлы с визуальными эффектами
│   │   ├── 🎯 Привязка к мирам: каждый портал ведет в конкретный мир
│   │   ├── 🤝 Интерактивность: выбор игроком мира для телепортации
│   │   ├── ↔️ Двусторонние переходы: порталы возврата
│   │   └── 🗝️ Условная активация: требования для разблокировки
│   ├── 📺 Система экранов загрузки [НОВОЕ]
│   │   ├── 🎨 Красивые заставки: уникальные картинки для каждого мира
│   │   ├── 📖 Интерактивное повествование: история по частям
│   │   ├── 📚 Прогрессивная история: новые главы при переходах
│   │   ├── ⏱️ Время загрузки: используется для атмосферы
│   │   └── 🎵 Фоновая музыка: уникальная для каждого мира
│   ├── 🏗️ Система высоты и слоев (Z-координата) [НОВОЕ]
│   │   ├── 📏 Z-уровни:
│   │   │   ├── Z = -1: подземные тоннели, подвалы
│   │   │   ├── Z = 0: базовый уровень игры (текущий)
│   │   │   └── Z = +1: мосты, верхушки деревьев, крыши
│   │   ├── 🕳️ Система тоннелей:
│   │   │   ├── Вход в тоннель: специальный тайл-триггер
│   │   │   ├── Размеры: от 2 до 5 клеток в длину
│   │   │   ├── Ширина: 2 клетки (узкий проход)
│   │   │   ├── Стены: ограничения движения по бокам
│   │   │   └── Перекрытие: травяные тайлы скрывают игрока
│   │   ├── 🌉 Мосты и переходы: движение над и под структурами
│   │   ├── 🏠 Многоуровневые здания: лестницы между этажами
│   │   └── 🎨 Визуальная глубина: сортировка отрисовки по Z-координате
│   ├── 🏔️ Препятствия
│   │   ├── Количество: 150 коричневых блоков (базовый мир)
│   │   ├── Размеры: 1x1 или 2x2 тайла
│   │   ├── Коллизии: полные
│   │   └── Тематические препятствия: уникальные для каждого мира
│   ├── 📦 Event Boxes [РАСШИРЕНО]
│   │   ├── 🌀 Порталы: переходы между мирами
│   │   ├── 👹 Спаун врагов: внезапное появление из "кустов"
│   │   ├── 🏪 Активация магазинов: торговцы и услуги
│   │   ├── 💎 Сундуки с лутом: сокровища и награды
│   │   ├── 📜 Активация квестов: начало заданий
│   │   ├── 🧩 Головоломки и переключатели: интерактивные элементы
│   │   ├── 🕳️ Входы в тоннели: переход на подземный уровень
│   │   └── 🎭 Сюжетные события: катсцены и диалоги
│   └── 📹 Камера
│       ├── Следование за игроком
│       ├── Ограничения границ (адаптивно к размеру мира)
│       ├── Размер окна: 1024x768
│       ├── Переходы между мирами: плавная смена фокуса [НОВОЕ]
│       └── Z-уровень камеры: адаптация к высоте игрока [НОВОЕ]
│
├── 👤 ИГРОК (Player) [РАСШИРЕН]
│   ├── 🎯 Базовые характеристики
│   │   ├── Размер: 32x32 пикселя
│   │   ├── Скорость: 120 пикс/сек (модифицируется ландшафтом)
│   │   └── Позиция: загружается из карты (@)
│   ├── ❤️ Система здоровья
│   │   ├── Максимальное здоровье: 100 HP (улучшается скиллами)
│   │   ├── Текущее здоровье: отслеживается
│   │   ├── Урон от ландшафта: 1 HP (болота, пески)
│   │   ├── Кулдаун урона: 1000мс
│   │   ├── Регенерация здоровья [НОВОЕ]
│   │   └── Смерть при 0 HP
│   ├── 🎯 Система магии [НОВОЕ]
│   │   ├── Максимальная мана: 100 MP (улучшается скиллами)
│   │   ├── Текущая мана: отслеживается
│   │   ├── Регенерация маны
│   │   ├── 3 стихии: Огонь, Холод, Молния
│   │   ├── Дальний урон: снаряды, лучи
│   │   ├── Ближний урон: магические усиления
│   │   └── Комбинирование стихий (огонь+холод = супер эффект)
│   ├── 🕹️ Управление
│   │   ├── Движение: WASD/стрелки (8 направлений)
│   │   ├── Нормализация диагонали: √2
│   │   ├── Блокировка во время атаки
│   │   ├── Блокировка щитом [НОВОЕ]
│   │   ├── F5: быстрое сохранение
│   │   └── F9: быстрая загрузка
│   ├── ⚔️ Боевая система [РАСШИРЕНА]
│   │   ├── Базовая атака: пробел
│   │   ├── Оружие в руках [НОВОЕ]:
│   │   │   ├── Меч (одна рука)
│   │   │   ├── Два меча (обе руки)
│   │   │   └── Арбалет (обе руки, дальний урон)
│   │   ├── Магия в руках [НОВОЕ]:
│   │   │   ├── Каждая рука - заклинание одной стихии
│   │   │   ├── Комбинирование двух рук
│   │   │   └── Супермаг режим
│   │   ├── Направленная по взгляду (8 направлений)
│   │   ├── Дистанция: 40 пикселей (ближний)/больше (дальний)
│   │   ├── Зона: 30x30 пикселей
│   │   ├── Длительность: 300мс
│   │   ├── Кулдаун: 100мс (зависит от оружия)
│   │   └── Визуальные эффекты: красный цвет + желтая зона
│   ├── 🛡️ Система защиты [НОВОЕ]
│   │   ├── Физический щит в руке
│   │   ├── Магический щит (заклинание, 5 минут)
│   │   ├── Блокировка дальнего урона (100%)
│   │   └── Блокировка ближнего урона (100%)
│   ├── 📈 Система прокачки [НОВОЕ]
│   │   ├── Опыт (XP): за убийства, квесты, исследование
│   │   ├── Уровни: повышение за XP
│   │   ├── Очки навыков: распределение по веткам
│   │   └── Дерево навыков (4 ветки по 3 скилла):
│   │       ├── Ветка магии (мана, урон, длительность)
│   │       ├── Ветка ближнего боя (урон, скорость, крит)
│   │       ├── Ветка дальнего боя (урон, точность, скорость)
│   │       └── Ветка выносливости (HP, регенерация, сопротивления)
│   └── 🎨 Визуализация
│       ├── Основной цвет: зеленый/красный
│       ├── Индикатор направления: белая точка
│       ├── Анимация атаки
│       ├── Полоска здоровья в UI
│       └── Полоска маны в UI [НОВОЕ]
│
├── 🤖 ВРАГИ (Enemy) [ЗНАЧИТЕЛЬНО РАСШИРЕНА]
│   ├── 🚶 Ходячие враги [НОВОЕ]
│   │   ├── 🏹 Стрелок
│   │   │   ├── Характеристики: 32x32, красный
│   │   │   ├── Поведение: патрулирование
│   │   │   ├── Атака: дальняя стрельба
│   │   │   ├── ИИ: обнаружение игрока, преследование
│   │   │   └── Дроп: стрелы, опыт
│   │   └── ⚔️ Мечник
│   │       ├── Характеристики: 32x32, темно-красный
│   │       ├── Поведение: патрулирование
│   │       ├── Атака: ближняя рукопашная
│   │       ├── ИИ: обнаружение игрока, преследование
│   │       └── Дроп: оружие, опыт
│   ├── 🏃 Быстрые враги [НОВОЕ]
│   │   └── 💨 Бегающий боец
│   │       ├── Характеристики: 28x28, оранжевый
│   │       ├── Поведение: быстрое перемещение
│   │       ├── Тактика: подбег → атака → отбег
│   │       ├── Атака: серия быстрых ударов
│   │       ├── ИИ: хитрое позиционирование
│   │       └── Дроп: зелья скорости, опыт
│   ├── 🧠 Система ИИ [НОВОЕ]
│   │   ├── Состояния: патруль, поиск, атака, отступление
│   │   ├── Обнаружение игрока: радиус видимости
│   │   ├── Патрулирование: заданные маршруты
│   │   ├── Групповое поведение: координация атак
│   │   └── Адаптивность: изменение тактики
│   └── 🔮 Потенциал расширения
│       ├── → Боссы с уникальной механикой
│       ├── → Элементальная устойчивость
│       ├── → Различные фракции врагов
│       └── → Эволюция поведения
│
├── 🧙 NPC [РАСШИРЕНА]
│   ├── 📊 Характеристики
│   │   ├── Размер: 32x32 пикселя
│   │   ├── Цвет: синий (варьируется по типу)
│   │   └── Имя: настраиваемое
│   ├── 💬 Диалоговая система
│   │   ├── Массив реплик
│   │   ├── Индекс текущей реплики
│   │   ├── Ветвящиеся диалоги [НОВОЕ]
│   │   ├── Условные реплики [НОВОЕ]
│   │   └── Взаимодействие по нажатию
│   ├── 🏪 Торговцы [НОВОЕ]
│   │   ├── Инвентарь товаров
│   │   ├── Система цен
│   │   ├── Покупка/продажа предметов
│   │   └── Обновление ассортимента
│   ├── 📜 Квестодатели [НОВОЕ]
│   │   ├── Выдача заданий
│   │   ├── Проверка выполнения
│   │   ├── Система наград
│   │   └── Цепочки квестов
│   └── 🔮 Потенциал расширения
│       ├── → Учителя навыков
│       ├── → Гильд-мастера
│       ├── → Информаторы
│       └── → Спутники
│
├── 🎁 ПРЕДМЕТЫ (Item) [ЗНАЧИТЕЛЬНО РАСШИРЕНА]
│   ├── 🧪 Расходуемые предметы [НОВОЕ]
│   │   ├── 🩹 Зелье здоровья
│   │   │   ├── Тип: мгновенное восстановление HP
│   │   │   ├── Варианты: малое, среднее, большое
│   │   │   └── Эффект: +25/50/100 HP
│   │   ├── 💙 Зелье магии
│   │   │   ├── Тип: мгновенное восстановление маны
│   │   │   ├── Варианты: малое, среднее, большое
│   │   │   └── Эффект: +25/50/100 MP
│   │   ├── 🌟 Комбо-зелье
│   │   │   ├── Тип: восстановление HP и MP
│   │   │   └── Эффект: +50 HP, +50 MP
│   │   ├── 💪 Зелье силы
│   │   │   ├── Тип: временное усиление
│   │   │   ├── Длительность: 5 минут
│   │   │   └── Эффект: +50% урон
│   │   └── 🛡️ Зелье защиты
│   │       ├── Тип: временная броня
│   │       ├── Длительность: 5 минут
│   │       └── Эффект: "крепкая кожа", +50% защита
│   ├── ⚔️ Оружие [НОВОЕ]
│   │   ├── 🗡️ Мечи
│   │   │   ├── Базовые характеристики: урон, скорость
│   │   │   ├── Типы: короткий, длинный, двуручный
│   │   │   └── Редкость: обычный, редкий, эпический
│   │   ├── 🏹 Дальнобойное
│   │   │   ├── Арбалет: высокий урон, медленная перезарядка
│   │   │   ├── Лук: средний урон, быстрая стрельба
│   │   │   └── Магические посохи: заклинания
│   │   └── 🔮 Магическое оружие
│   │       ├── Элементальные посохи (огонь, холод, молния)
│   │       ├── Зачарованные мечи
│   │       └── Артефактное оружие
│   ├── 🦾 Броня и защита [НОВОЕ]
│   │   ├── 👕 Доспехи: увеличение защиты и HP
│   │   ├── 🛡️ Щиты: блокировка урона
│   │   ├── 💍 Аксессуары: кольца, амулеты
│   │   └── 🎒 Экипировка: шлемы, перчатки, ботинки
│   ├── 💎 Система улучшений [НОВОЕ - по мотивам Diablo]
│   │   ├── 🔷 Руны: базовые улучшения
│   │   ├── 💠 Камни: специализированные бонусы
│   │   ├── 🔸 Гнезда: слоты в оружии/броне
│   │   ├── 🔨 Крафтинг: создание и улучшение
│   │   └── 🌟 Сеты: комплектные бонусы
│   ├── 🔑 Ключевые предметы [НОВОЕ]
│   │   ├── Ключи от дверей и сундуков
│   │   ├── Квестовые предметы
│   │   ├── Карты и схемы
│   │   └── Артефакты
│   └── 🎒 Система инвентаря [НОВОЕ]
│       ├── Сетка предметов: 10x6 слотов
│       ├── Категории: оружие, броня, расходуемые, разное
│       ├── Сортировка и фильтрация
│       ├── Быстрые слоты: F1-F8
│       └── Система веса: ограничение переноски
│
├── 🖥️ ИНТЕРФЕЙС [ЗНАЧИТЕЛЬНО РАСШИРЕН]
│   ├── 🎮 Главное меню [ПОЛНОСТЬЮ РЕАЛИЗОВАН]
│   │   ├── Динамические пункты меню
│   │   ├── Новая игра / Продолжить / Загрузить / Выход
│   │   ├── Навигация: стрелки вверх/вниз
│   │   └── Стилизация: желтое выделение + стрелки
│   ├── 🎒 Окно инвентаря [НОВОЕ]
│   │   ├── Открытие: клавиша I
│   │   ├── Сетка предметов с иконками
│   │   ├── Информация о предмете при наведении
│   │   ├── Перетаскивание предметов
│   │   ├── Быстрое использование
│   │   └── Экипировка предметов
│   ├── 📊 Окно характеристик [НОВОЕ]
│   │   ├── Открытие: клавиша C
│   │   ├── Текущие характеристики игрока
│   │   ├── Дерево навыков
│   │   ├── Распределение очков навыков
│   │   └── Просмотр бонусов от экипировки
│   ├── 📜 Окно квестов [НОВОЕ]
│   │   ├── Открытие: клавиша Q
│   │   ├── Список активных квестов
│   │   ├── Описания и цели
│   │   ├── Прогресс выполнения
│   │   └── История выполненных квестов
│   ├── 🏪 Окно торговли [НОВОЕ]
│   │   ├── Инвентарь торговца и игрока
│   │   ├── Цены покупки/продажи
│   │   ├── Система торга
│   │   └── Подтверждение сделок
│   ├── ❤️ Расширенный HUD [РАСШИРЕН]
│   │   ├── Полоска здоровья: красно-зеленый градиент
│   │   ├── Полоска маны: сине-фиолетовый градиент [НОВОЕ]
│   │   ├── Миникарта: 150x150 в правом верхнем углу
│   │   ├── Быстрые слоты: F1-F8 [НОВОЕ]
│   │   ├── Индикаторы статусов: бафы/дебафы [НОВОЕ]
│   │   ├── Компас и указатель цели [НОВОЕ]
│   │   └── Счетчик опыта и уровень [НОВОЕ]
│   ├── 💀 Экран Game Over [ПОЛНОСТЬЮ РЕАЛИЗОВАН]
│   │   ├── Полупрозрачный черный фон
│   │   ├── Заголовок "💀 GAME OVER"
│   │   ├── Отображение игровой статистики
│   │   ├── Опции: возврат в меню / выход
│   │   └── Навигация: WASD/стрелки + Enter
│   └── 🐛 Отладочная информация (F1)
│       ├── Координаты игрока
│       ├── FPS, уровень, опыт [РАСШИРЕНО]
│       ├── Состояние игрока
│       ├── Информация о магии [НОВОЕ]
│       └── Размер шрифта: 30
│
├── 🌍 СИСТЕМА ЛАНДШАФТА [ПОЛНОСТЬЮ РЕАЛИЗОВАНА + РАСШИРЕНИЯ]
│   ├── 🗺️ Типы ландшафта
│   │   ├── Существующие: пустота, горы, вода, деревья, болота, пески
│   │   ├── Новые биомы [ПЛАНИРУЕТСЯ]:
│   │   │   ├── Лед: скольжение, медленное движение
│   │   │   ├── Лава: высокий урон, огненный дебаф
│   │   │   ├── Густой лес: скрытность, медленное движение
│   │   │   └── Пещеры: ограниченная видимость
│   │   └── Старт игрока (@): заменяется на пустоту
│   ├── 🌎 Множественные карты [НОВОЕ]
│   │   ├── Система переходов между картами
│   │   ├── Сохранение состояния карт
│   │   ├── Различные размеры карт
│   │   └── Тематические локации
│   ├── 💥 Расширенная система урона
│   │   ├── Существующий урон: болота (1 HP), пески (1 HP)
│   │   ├── Кулдаун урона: 1000мс
│   │   ├── Новые источники урона [ПЛАНИРУЕТСЯ]
│   │   └── Интеграция со статистикой
│   └── 🏃 Модификация скорости
│       ├── Существующие: пески (50% скорости)
│       ├── Новые модификаторы [ПЛАНИРУЕТСЯ]
│       └── Взаимодействие с экипировкой
│
├── 📊 СИСТЕМА СТАТИСТИКИ [ЗНАЧИТЕЛЬНО РАСШИРЕНА]
│   ├── ⏱️ Время игры
│   │   ├── Отслеживание времени с начала игры
│   │   ├── Форматирование MM:SS
│   │   ├── Время на уровне [НОВОЕ]
│   │   └── Автоматическое обновление
│   ├── ⚔️ Расширенная боевая статистика
│   │   ├── Убито врагов: по типам [РАСШИРЕНО]
│   │   ├── Нанесен урон: общий и по типам
│   │   ├── Получен урон: от врагов и окружения
│   │   ├── Количество атак: успешных и промахов
│   │   ├── Критические удары [НОВОЕ]
│   │   ├── Использовано заклинаний [НОВОЕ]
│   │   └── Заблокировано урона [НОВОЕ]
│   ├── 🎒 Расширенное исследование
│   │   ├── Собрано предметов: по категориям [РАСШИРЕНО]
│   │   ├── Пройденное расстояние: в метрах
│   │   ├── Открытые области карт [НОВОЕ]
│   │   ├── Найденные сокровища [НОВОЕ]
│   │   ├── Выполненные квесты [НОВОЕ]
│   │   └── Торговые сделки [НОВОЕ]
│   ├── 📈 Система прогресса [НОВОЕ]
│   │   ├── Текущий уровень и опыт
│   │   ├── Распределенные очки навыков
│   │   ├── Изученные заклинания
│   │   └── Достижения и титулы
│   └── 💀 Здоровье и выживание
│       ├── Количество смертей: отслеживается
│       ├── Потеряно здоровья: отслеживается
│       ├── Восстановлено здоровья [РАСШИРЕНО]
│       ├── Использовано зелий [НОВОЕ]
│       └── Время в критическом состоянии [НОВОЕ]
│
├── 💾 СИСТЕМА СОХРАНЕНИЙ [РАСШИРЕНА]
│   ├── 📁 Файловая система
│   │   ├── Папка saves/ для всех сохранений
│   │   ├── JSON формат с версионированием
│   │   ├── UTF-8 кодировка
│   │   └── Красивое форматирование
│   ├── ⚡ Быстрые сохранения
│   │   ├── F5: сохранение в quicksave.json
│   │   ├── F9: загрузка из quicksave.json
│   │   ├── Уведомления об успехе/ошибке
│   │   └── Проверка существования файла
│   ├── 💽 Расширенная структура сохранения
│   │   ├── Версия сохранения (2.0) [ОБНОВЛЕНО]
│   │   ├── Временная метка ISO 8601
│   │   ├── Данные игрока: позиция, здоровье, мана, уровень [РАСШИРЕНО]
│   │   ├── Инвентарь: предметы, экипировка [НОВОЕ]
│   │   ├── Навыки и заклинания [НОВОЕ]
│   │   ├── Квесты и их состояния [НОВОЕ]
│   │   ├── Данные мира: карты, NPC, враги [РАСШИРЕНО]
│   │   ├── Открытые области и секреты [НОВОЕ]
│   │   └── Расширенная игровая статистика
│   ├── 🗂️ Множественные слоты сохранения [НОВОЕ]
│   │   ├── 10 слотов для ручных сохранений
│   │   ├── Скриншоты сохранений
│   │   ├── Описания и временные метки
│   │   └── Быстрый доступ через меню
│   └── 🛡️ Безопасность
│       ├── Проверка версии при загрузке
│       ├── Миграция старых сохранений [НОВОЕ]
│       ├── Валидация данных
│       ├── Резервное копирование [НОВОЕ]
│       ├── Обработка ошибок
│       └── Восстановление после сбоев
│
├── 📜 КВЕСТОВАЯ СИСТЕМА [НОВОЕ]
│   ├── 🎯 Типы квестов
│   │   ├── Главные квесты: основная сюжетная линия
│   │   ├── Побочные квесты: дополнительные задания
│   │   ├── Ежедневные задания: повторяемые квесты
│   │   └── Достижения: скрытые цели
│   ├── 📋 Структура квеста
│   │   ├── Уникальный идентификатор
│   │   ├── Название и описание
│   │   ├── Цели и подцели
│   │   ├── Условия активации
│   │   ├── Система наград (опыт, предметы, золото)
│   │   └── Связи с другими квестами
│   ├── 🔄 Состояния квестов
│   │   ├── Неактивный: не доступен игроку
│   │   ├── Доступный: можно взять
│   │   ├── Активный: в процессе выполнения
│   │   ├── Выполненный: можно сдать
│   │   ├── Завершенный: получена награда
│   │   └── Проваленный: не удалось выполнить
│   ├── 🎁 Система наград
│   │   ├── Опыт: основной источник XP
│   │   ├── Золото: игровая валюта
│   │   ├── Предметы: оружие, броня, расходуемые
│   │   ├── Доступ: новые области, NPC, квесты
│   │   └── Титулы и достижения
│   └── 📊 Отслеживание прогресса
│       ├── Счетчики выполнения
│       ├── Маркеры на карте
│       ├── Журнал квестов
│       └── История выполненных заданий
│
├── ⚙️ КОНФИГУРАЦИЯ [ЗНАЧИТЕЛЬНО РАСШИРЕНА]
│   ├── 📺 Дисплей
│   │   ├── Разрешение: 1024x768
│   │   ├── FPS: 60
│   │   ├── Полноэкранный режим [НОВОЕ]
│   │   └── Настройки графики [НОВОЕ]
│   ├── 🌍 Мир [ЗНАЧИТЕЛЬНО РАСШИРЕН]
│   │   ├── Базовая карта: 2000x2000 пикселей
│   │   ├── Размер тайла: 32 пикселя
│   │   ├── Множественные миры [НОВОЕ]:
│   │   │   ├── Количество доступных миров
│   │   │   ├── Размеры каждого мира (настраиваемые)
│   │   │   ├── Тематики миров (лес, пещера, лед, подземелье)
│   │   │   └── Связи между мирами (порталы)
│   │   ├── Z-координата [НОВОЕ]:
│   │   │   ├── Количество Z-уровней (по умолчанию 3: -1, 0, +1)
│   │   │   ├── Высота слоев в пикселях
│   │   │   └── Настройки перекрытия тайлов
│   │   ├── Система тоннелей [НОВОЕ]:
│   │   │   ├── Максимальная длина тоннеля (5 клеток)
│   │   │   ├── Ширина прохода (2 клетки)
│   │   │   ├── Типы входов в тоннели
│   │   │   └── Визуальные эффекты перекрытия
│   │   └── Настройки генерации [РАСШИРЕНО]:
│   │       ├── Количество препятствий по мирам
│   │       ├── Размещение порталов
│   │       ├── Генерация тоннелей
│   │       └── Размещение event boxes
│   ├── 👤 Игрок [РАСШИРЕН]
│   │   ├── Базовые: скорость (120), размер (32), здоровье (100)
│   │   ├── Мана: максимальная (100), регенерация [НОВОЕ]
│   │   ├── Кулдауны: урон (1000мс), атака (100мс)
│   │   └── Система уровней: стартовый уровень, множитель XP [НОВОЕ]
│   ├── ⚔️ Боевая система [РАСШИРЕНА]
│   │   ├── Атака: длительность (300мс), кулдаун (100мс), дистанция (40)
│   │   ├── Магия: стоимость заклинаний, кулдауны [НОВОЕ]
│   │   ├── Оружие: базовый урон, модификаторы [НОВОЕ]
│   │   └── Защита: эффективность блока [НОВОЕ]
│   ├── 🤖 ИИ врагов [НОВОЕ]
│   │   ├── Радиус обнаружения
│   │   ├── Скорость патрулирования
│   │   ├── Агрессивность
│   │   └── Координация групп
│   ├── 🎨 Цвета (RGB)
│   │   ├── Игрок: зеленый/красный
│   │   ├── Враги: различные по типам [РАСШИРЕНО]
│   │   ├── Ландшафт: различные цвета
│   │   ├── UI: белый/желтый/серый
│   │   └── Магические эффекты [НОВОЕ]
│   ├── 🌍 Генерация мира [РАСШИРЕНА]
│   │   ├── Количество препятствий: 150
│   │   ├── Безопасная зона: 100
│   │   ├── Размещение врагов [НОВОЕ]
│   │   ├── Размещение предметов [НОВОЕ]
│   │   └── Размещение NPC [НОВОЕ]
│   ├── 📜 Квесты [НОВОЕ]
│   │   ├── Настройки сложности
│   │   ├── Модификаторы наград
│   │   ├── Время на выполнение
│   │   └── Система подсказок
│   └── 🎵 Аудио [ПЛАНИРУЕТСЯ]
│       ├── Громкость музыки
│       ├── Громкость эффектов
│       ├── Настройки качества
│       └── Адаптивная музыка
│
└── 🔮 ПОТЕНЦИАЛ ДАЛЬНЕЙШЕГО РАСШИРЕНИЯ
    ├── 🎯 Продвинутая игровая механика
    │   ├── → Мультиплеер (кооператив)
    │   ├── → Система гильдий
    │   ├── → PvP арены
    │   ├── → Система наставничества
    │   └── → Турниры и соревнования
    ├── 🌍 Расширение мира
    │   ├── → Процедурная генерация подземелий
    │   ├── → Динамические события мира
    │   ├── → Система погоды
    │   ├── → День/ночь цикл
    │   └── → Сезонные изменения
    ├── 🤖 Продвинутый ИИ
    │   ├── → Машинное обучение поведения
    │   ├── → Адаптация к стилю игры
    │   ├── → Эмоциональные реакции NPC
    │   └── → Динамические альянсы
    ├── 📜 Расширенная квестовая система
    │   ├── → Процедурные квесты
    │   ├── → Квесты от сообщества
    │   ├── → Интерактивные сюжетные арки
    │   └── → Влияние выборов на мир
    ├── 🎵 Полная аудио система
    │   ├── → Динамический саундтрек
    │   ├── → 3D позиционный звук
    │   ├── → Голосовое сопровождение
    │   └── → Интерактивная музыка
    ├── 🌐 Онлайн функции
    │   ├── → Облачные сохранения
    │   ├── → Достижения Steam/консолей
    │   ├── → Система рейтингов
    │   └── → Социальные функции
    └── 📱 Кросс-платформенность
        ├── → Мобильная версия
        ├── → Консольные порты
        ├── → Web-версия
        └── → Синхронизация между устройствами
```

## Описание расширенной структуры

### 🚀 Ключевые нововведения

#### 1. Система множественных миров и телепортации
- **Множественные миры**: Основной, пещера, подземелье, лед, лес
- **Порталы**: Интерактивная телепортация между мирами
- **Экраны загрузки**: Красивые заставки с прогрессивной историей
- **Тематические миры**: Уникальная атмосфера и механики для каждого

#### 2. Система высоты и тоннелей (Z-координата)
- **Многослойный ландшафт**: Z-уровни -1, 0, +1
- **Тоннели**: Подземные проходы с перекрывающими тайлами
- **Визуальная глубина**: Игрок скрывается под травяными тайлами
- **3D эффекты в 2D**: Мосты, многоуровневые здания, пещеры

#### 3. Система магии и продвинутого боя
- **3 стихии**: Огонь, Холод, Молния с уникальными эффектами
- **Комбинирование**: Огонь + Холод = супер эффекты
- **Оружие**: Мечи, арбалеты, магические посохи
- **Две руки**: Независимое оружие/заклинания в каждой руке

#### 4. Продвинутая система врагов
- **Ходячие враги**: Стрелки и мечники с патрулированием
- **Быстрые враги**: Тактика "подбег-атака-отбег"
- **ИИ поведение**: Обнаружение, преследование, координация

#### 5. Полная система прогрессии
- **4 ветки навыков**: Магия, ближний бой, дальний бой, выносливость
- **Система уровней**: Опыт за бои, квесты, исследование
- **Дерево навыков**: По мотивам Dark Messiah of Might and Magic

#### 6. Богатая система предметов
- **Зелья**: Здоровье, мана, усиления, защита
- **Экипировка**: Оружие, броня, аксессуары
- **Улучшения**: Руны и камни как в Diablo 2/3
- **Инвентарь**: Полнофункциональная система управления

#### 7. Квестовая система
- **Типы квестов**: Главные, побочные, ежедневные, достижения
- **Состояния**: От неактивных до завершенных
- **Награды**: Опыт, предметы, доступы, титулы

#### 8. Event boxes и интерактивность
- **Порталы**: Переходы между мирами
- **Входы в тоннели**: Переход на подземный уровень
- **Триггеры событий**: Спаун врагов, активация магазинов
- **Головоломки и секреты**

### 📊 Статус реализации

#### ✅ Готовые системы (из текущей версии)
- Базовый игрок с движением и атакой
- Система ландшафта с уроном
- Интерфейс (меню, HUD, Game Over)
- Система сохранений
- Базовые NPC, враги, предметы
- Статистика и отладка

#### 🔨 Требуют разработки (приоритет 1)
- **Система множественных миров**: порталы, телепортация, экраны загрузки
- **Z-координата и тоннели**: многослойный ландшафт, подземные проходы
- **Система магии**: 3 стихии, комбинирование эффектов
- **Расширенная система оружия**: мечи, арбалеты, двуручное оружие
- **ИИ врагов**: патрулирование, различные типы поведения

#### 🔨 Требуют разработки (приоритет 2)
- **Система щитов и защиты**: физическая и магическая блокировка
- **Event boxes**: порталы, входы в тоннели, триггеры событий
- **Дерево навыков и прогрессия**: 4 ветки развития
- **Полная система инвентаря**: управление предметами и экипировкой
- **Базовая квестовая система**: простые задания и награды

#### 🔨 Требуют разработки (приоритет 3)
- **Продвинутая квестовая система**: сложные цепочки заданий
- **Система крафтинга**: руны, камни, улучшения как в Diablo
- **Торговля с NPC**: магазины, покупка/продажа
- **Продвинутые биомы**: специальные эффекты для каждого мира
- **Аудио система**: музыка и звуковые эффекты

### 🏗️ Архитектурные принципы (сохраняются)
- **Модульность**: Каждая новая система - отдельный модуль
- **Конфигурационность**: Все новые параметры в config.ini
- **Расширяемость**: Легкая интеграция новых функций
- **Производительность**: Оптимизация для 60 FPS
- **Тестируемость**: Юнит-тесты для всех новых систем

### 🎯 Этапы реализации

1. **Этап 1 - Множественные миры**: 
   - Система порталов и телепортации
   - Z-координата и тоннели  
   - Экраны загрузки с историей
   - Создание мира-пещеры с тоннелями

2. **Этап 2 - Боевая магия**: 
   - Система магии (3 стихии)
   - Расширенное оружие (мечи, арбалеты)
   - Система щитов и защиты
   - Комбинирование эффектов

3. **Этап 3 - Умные враги**: 
   - ИИ поведение и патрулирование
   - Различные типы врагов
   - Event boxes и триггеры

4. **Этап 4 - Прогрессия**: 
   - Дерево навыков (4 ветки)
   - Система уровней и опыта
   - Полный инвентарь и экипировка

5. **Этап 5 - Контент**: 
   - Квестовая система
   - Торговля с NPC
   - Дополнительные миры

6. **Этап 6 - Полировка**: 
   - Система крафтинга (Diablo-стиль)
   - Аудио и визуальные эффекты
   - Балансировка и оптимизация

Этот расширенный план превращает игру из простого прототипа в полнофункциональную RPG с глубокой механикой прогрессии и богатым игровым контентом.